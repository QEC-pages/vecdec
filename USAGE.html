<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 10.1.2" />
<meta name="description" content="This page contains examples of how `vecdec` can be used for calculations with classical or quantum codes" />
<title>USAGE</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overridden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>USAGE</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_common_tasks_with_code_vecdec_code">Common tasks with <code>vecdec</code></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_simulate_the_performance_of_a_classical_or_quantum_code">Simulate the performance of a classical or quantum code</h3>
<div class="sect3">
<h4 id="_simulate_the_performance_of_a_classical_code">Simulate the performance of a classical code</h4>
<div class="paragraph"><p>A classical (binary linear) code must be specified with a parity-check
matrix using Matrix Market coordinate (<code>MTX</code>) or David MacKay&#8217;s
<code>alist</code> format; errors in this mode can only be generated internally.</p></div>
<div class="paragraph"><p>For the examples in this section, we use the LDPC code <code>[96,48,6]</code>
from David MacKay collection
(<a href="https://www.inference.org.uk/mackay/codes/data.html">https://www.inference.org.uk/mackay/codes/data.html</a>) in the file
<code>./examples/96.3.963.alist</code></p></div>
<div class="sect4">
<h5 id="_use_the_default_decoder">Use the default decoder</h5>
<div class="paragraph"><p>The RIS decoder <code>mode=0 lerr=1</code> is the default option (here using
<code>steps=5000</code> information sets).  Also default is the pre-decoder
parameter <code>uW=1</code>.  The latter specifies that only errors of weight up
to <code>uW=1</code> will be added to the syndrome hash used for cluster-based
matching.</p></div>
<div class="listingblock">
<div class="title">example A1</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># ex_A1.sh</span></span>
<span style="color: #990000">.</span>/src/vecdec <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">7</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">5000</span> <span style="color: #990000">\</span>
             <span style="color: #009900">finH</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples<span style="color: #990000">/</span><span style="color: #993399">96.3</span><span style="color: #990000">.</span><span style="color: #993399">963</span><span style="color: #990000">.</span>alist <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #993399">0.05</span> <span style="color: #990000">\</span>
             <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">1000</span></tt></pre></div></div>
<div class="paragraph"><p>This generates the output</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #000000">    1:</span> <span style="font-style: italic"><span style="color: #9A1900"># Could not process Matrix Market banner; try 'alist' format</span></span>
<span style="color: #000000">    2:</span> <span style="font-style: italic"><span style="color: #9A1900"># read alist file ./examples/96.3.963.alist (transposed): rows=48 cols=96 nz=288</span></span>
<span style="color: #000000">    3:</span> <span style="font-style: italic"><span style="color: #9A1900"># mode=0, running vecdec RIS decoder : generating errors internally</span></span>
<span style="color: #000000">    4:</span> <span style="font-style: italic"><span style="color: #9A1900"># mode=0 submode=0: use RIS decoder</span></span>
<span style="color: #000000">    5:</span> <span style="font-style: italic"><span style="color: #9A1900"># RIS decoder parameters: steps=5000 swait=0 lerr=-1</span></span>
<span style="color: #000000">    6:</span> <span style="font-style: italic"><span style="color: #9A1900"># ntot=1000 nvec=1000 nfail=0</span></span>
<span style="color: #000000">    7:</span> <span style="font-style: italic"><span style="color: #9A1900"># uW=1, adding errors of weight up to 1 to syndrome hash</span></span>
<span style="color: #000000">    8:</span> <span style="font-style: italic"><span style="color: #9A1900"># uX=0, will not use partially matched errors for pre-decoding</span></span>
<span style="color: #000000">    9:</span> <span style="font-style: italic"><span style="color: #9A1900"># stored 96 errors / 96 distinct syndrome vectors in hash</span></span>
<span style="color: #000000">   10:</span> <span style="font-style: italic"><span style="color: #9A1900"># starting round 1 of 1</span></span>
<span style="color: #000000">   11:</span> <span style="font-style: italic"><span style="color: #9A1900"># generated 1000 det/obs pairs</span></span>
<span style="color: #000000">   12:</span> <span style="font-style: italic"><span style="color: #9A1900"># P_FAIL N_TOT FAIL S_TOT : C_TRIVIAL S_TRIVIAL   C_LOW S_LOW  C_CLUS S_CLUS : FAIL_RIS N_RIS S_RIS</span></span>
<span style="color: #000000">   13:</span>       <span style="color: #993399">0.033</span> <span style="color: #993399">1000</span> <span style="color: #993399">33</span> <span style="color: #993399">967</span> <span style="color: #990000">:</span> <span style="color: #993399">8</span> <span style="color: #993399">8</span>    <span style="color: #993399">44</span> <span style="color: #993399">44</span>   <span style="color: #993399">16</span> <span style="color: #993399">16</span> <span style="color: #990000">:</span> <span style="color: #993399">33</span> <span style="color: #993399">932</span> <span style="color: #993399">899</span></tt></pre></div></div>
<div class="paragraph"><p>Only the last line of the output contains the actual results; the
remaining rows contain auxiliary information which can be suppressed
by setting <code>debug=0</code>.</p></div>
<div class="paragraph"><p>In this particular example, the decoding fail probability was
<code>P_FAIL=0.033</code> (decoding failed <code>FAIL=33</code> times out of <code>N_TOT=1000</code>
syndrome vectors, with <code>S_TOT=967</code> total successfully decoded syndrome
vectors.)  The number of successfully decoded syndrome vectors is a
sum of <code>S_TRIVIAL=8</code> cases of trivial (all zero) syndrome vectors,
<code>S_LOW=44</code> low-weight (single-cluster) syndrome vector, <code>S_CLUS=16</code>
syndrome vectors formed by several clusters, and <code>S_RIS=899</code>
successful (out of <code>C_RIS=932</code> attempted) RIS decoding events.</p></div>
<div class="paragraph"><p>To guarantee the same error vectors, specify the same <code>seed</code>
parameter, and also use the same values for <code>ntot</code> and <code>nvec</code>
parameters (or just read detector events / observables from files).
This example demonstrates the effect of varying the decoder parameters
<code>steps</code> and <code>lerr</code>:</p></div>
<div class="listingblock">
<div class="title">example A2</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #009900">vecdec</span><span style="color: #990000">=.</span>/src/vecdec
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span> lerr <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> <span style="color: #993399">0</span> <span style="color: #993399">1</span> <span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">do</span></span>
  <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> steps <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> <span style="color: #993399">500</span> <span style="color: #993399">2000</span> <span style="color: #993399">5000</span> <span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">do</span></span>
    echo -e <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #009900">$lerr</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #009900">$steps</span> <span style="color: #FF0000">"</span><span style="color: #CC33CC">\t</span><span style="color: #FF0000">"</span> <span style="color: #990000">\</span>
            `<span style="color: #009900">$vecdec</span> <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">113</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">finH</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples<span style="color: #990000">/</span><span style="color: #993399">96.3</span><span style="color: #990000">.</span><span style="color: #993399">963</span><span style="color: #990000">.</span>alist <span style="color: #990000">\</span>
                     <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #009900">$steps</span> <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #993399">0.05</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #009900">$lerr</span>`
  <span style="font-weight: bold"><span style="color: #0000FF">done</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">done</span></span>
---
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">500</span>         <span style="color: #993399">0.084</span> <span style="color: #993399">1000</span> <span style="color: #993399">84</span> <span style="color: #993399">916</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">84</span> <span style="color: #993399">959</span> <span style="color: #993399">875</span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">2000</span>        <span style="color: #993399">0.033</span> <span style="color: #993399">1000</span> <span style="color: #993399">33</span> <span style="color: #993399">967</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">33</span> <span style="color: #993399">959</span> <span style="color: #993399">926</span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">5000</span>        <span style="color: #993399">0.024</span> <span style="color: #993399">1000</span> <span style="color: #993399">24</span> <span style="color: #993399">976</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">24</span> <span style="color: #993399">959</span> <span style="color: #993399">935</span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">500</span>         <span style="color: #993399">0.025</span> <span style="color: #993399">1000</span> <span style="color: #993399">25</span> <span style="color: #993399">975</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">25</span> <span style="color: #993399">959</span> <span style="color: #993399">934</span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">2000</span>        <span style="color: #993399">0.024</span> <span style="color: #993399">1000</span> <span style="color: #993399">24</span> <span style="color: #993399">976</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">24</span> <span style="color: #993399">959</span> <span style="color: #993399">935</span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">5000</span>        <span style="color: #993399">0.024</span> <span style="color: #993399">1000</span> <span style="color: #993399">24</span> <span style="color: #993399">976</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">24</span> <span style="color: #993399">959</span> <span style="color: #993399">935</span></tt></pre></div></div>
<div class="paragraph"><p>Similarly, increasing the pre-decoder parameter <code>uW</code> can dramatically
speed up the decoding without reducing the accuracy:</p></div>
<div class="listingblock">
<div class="title">example A3</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #009900">vecdec</span><span style="color: #990000">=.</span>/src/vecdec
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span> uW <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> <span style="color: #993399">1</span> <span style="color: #993399">2</span> <span style="color: #993399">3</span> <span style="color: #993399">4</span><span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">do</span></span>
    echo -e <span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #009900">$uW</span> <span style="color: #FF0000">"</span><span style="color: #CC33CC">\t</span><span style="color: #FF0000">"</span> <span style="color: #990000">\</span>
         `<span style="color: #009900">$vecdec</span> <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">113</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #990000">\</span>
             <span style="color: #009900">finH</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples<span style="color: #990000">/</span><span style="color: #993399">96.3</span><span style="color: #990000">.</span><span style="color: #993399">963</span><span style="color: #990000">.</span>alist <span style="color: #990000">\</span>
             <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">5000</span> <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #993399">0.05</span> <span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #009900">$uW</span> `
<span style="font-weight: bold"><span style="color: #0000FF">done</span></span>
---
<span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #993399">1</span>     <span style="color: #993399">0.024</span> <span style="color: #993399">1000</span> <span style="color: #993399">24</span> <span style="color: #993399">976</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">24</span> <span style="color: #993399">959</span> <span style="color: #993399">935</span>
<span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #993399">2</span>     <span style="color: #993399">0.024</span> <span style="color: #993399">1000</span> <span style="color: #993399">24</span> <span style="color: #993399">976</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">117</span> <span style="color: #993399">117</span> <span style="color: #993399">9</span> <span style="color: #993399">9</span> <span style="color: #990000">:</span> <span style="color: #993399">24</span> <span style="color: #993399">868</span> <span style="color: #993399">844</span>
<span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #993399">3</span>     <span style="color: #993399">0.024</span> <span style="color: #993399">1000</span> <span style="color: #993399">24</span> <span style="color: #993399">976</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">290</span> <span style="color: #993399">290</span> <span style="color: #993399">5</span> <span style="color: #993399">5</span> <span style="color: #990000">:</span> <span style="color: #993399">24</span> <span style="color: #993399">699</span> <span style="color: #993399">675</span>
<span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #993399">4</span>     <span style="color: #993399">0.024</span> <span style="color: #993399">1000</span> <span style="color: #993399">24</span> <span style="color: #993399">976</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">461</span> <span style="color: #993399">461</span> <span style="color: #993399">2</span> <span style="color: #993399">2</span> <span style="color: #990000">:</span> <span style="color: #993399">24</span> <span style="color: #993399">531</span> <span style="color: #993399">507</span></tt></pre></div></div>
<div class="paragraph"><p>Here, with <code>uW=4</code>, the pre-decoder took care of about half of the
syndrome vectors.  With longer codes, the syndrome vector list may be
too long; use non-zero values of <code>uR</code> to restrict the graph distance
between set bits in stored error clusters:</p></div>
<div class="listingblock">
<div class="title">example A4</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #009900">vecdec</span><span style="color: #990000">=.</span>/src/vecdec
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span> uW <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> <span style="color: #993399">2</span><span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">do</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> uR <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> <span style="color: #993399">1</span> <span style="color: #993399">2</span> <span style="color: #993399">3</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">do</span></span>
    echo -e <span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #009900">$uW</span> <span style="color: #009900">uR</span><span style="color: #990000">=</span><span style="color: #009900">$uR</span> <span style="color: #FF0000">"</span><span style="color: #CC33CC">\t</span><span style="color: #FF0000">"</span> <span style="color: #990000">\</span>
         `<span style="color: #009900">$vecdec</span> <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">113</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #990000">\</span>
             <span style="color: #009900">finH</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples<span style="color: #990000">/</span><span style="color: #993399">96.3</span><span style="color: #990000">.</span><span style="color: #993399">963</span><span style="color: #990000">.</span>alist <span style="color: #990000">\</span>
             <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">5000</span> <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #993399">0.05</span> <span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #009900">$uW</span> <span style="color: #009900">uR</span><span style="color: #990000">=</span><span style="color: #009900">$uR</span>`
    <span style="font-weight: bold"><span style="color: #0000FF">done</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">done</span></span>
---
<span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #009900">uR</span><span style="color: #990000">=</span><span style="color: #993399">1</span>        <span style="color: #993399">0.024</span> <span style="color: #993399">1000</span> <span style="color: #993399">24</span> <span style="color: #993399">976</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">36</span> <span style="color: #993399">36</span> <span style="color: #993399">17</span> <span style="color: #993399">17</span> <span style="color: #990000">:</span> <span style="color: #993399">24</span> <span style="color: #993399">941</span> <span style="color: #993399">917</span>
<span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #009900">uR</span><span style="color: #990000">=</span><span style="color: #993399">2</span>        <span style="color: #993399">0.024</span> <span style="color: #993399">1000</span> <span style="color: #993399">24</span> <span style="color: #993399">976</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">106</span> <span style="color: #993399">106</span> <span style="color: #993399">20</span> <span style="color: #993399">20</span> <span style="color: #990000">:</span> <span style="color: #993399">24</span> <span style="color: #993399">868</span> <span style="color: #993399">844</span>
<span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #009900">uR</span><span style="color: #990000">=</span><span style="color: #993399">3</span>        <span style="color: #993399">0.024</span> <span style="color: #993399">1000</span> <span style="color: #993399">24</span> <span style="color: #993399">976</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">117</span> <span style="color: #993399">117</span> <span style="color: #993399">9</span> <span style="color: #993399">9</span> <span style="color: #990000">:</span> <span style="color: #993399">24</span> <span style="color: #993399">868</span> <span style="color: #993399">844</span>
<span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #009900">uR</span><span style="color: #990000">=</span><span style="color: #993399">0</span>        <span style="color: #993399">0.024</span> <span style="color: #993399">1000</span> <span style="color: #993399">24</span> <span style="color: #993399">976</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">117</span> <span style="color: #993399">117</span> <span style="color: #993399">9</span> <span style="color: #993399">9</span> <span style="color: #990000">:</span> <span style="color: #993399">24</span> <span style="color: #993399">868</span> <span style="color: #993399">844</span></tt></pre></div></div>
<div class="paragraph"><p>Here <code>uR=0</code> corresponds to infinite distance, i.e., with <code>uW=2</code>, all
error vectors of weight <code>0</code>, <code>1</code>, and <code>2</code> are stored in the hash.</p></div>
</div>
<div class="sect4">
<h5 id="_use_belief_propagation_bp_decoder_with_optional_osd">Use Belief Propagation (BP) decoder with optional OSD.</h5>
<div class="paragraph"><p>Same classical code, using up to <code>steps=10</code> BP iterations with
parallel update schedule, using both average and instantaneous LLR
(whichever converges first), followed by OSD1 (<code>lerr=1</code>) using up to
<code>maxosd=50</code> columns for OSD decoding (only last two lines of the output are included):</p></div>
<div class="listingblock">
<div class="title">example B1</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #990000">.</span>/src/vecdec <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">maxosd</span><span style="color: #990000">=</span><span style="color: #993399">50</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #990000">\</span>
             <span style="color: #009900">finH</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples<span style="color: #990000">/</span><span style="color: #993399">96.3</span><span style="color: #990000">.</span><span style="color: #993399">963</span><span style="color: #990000">.</span>alist <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #993399">0.05</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">113</span>
---
<span style="font-style: italic"><span style="color: #9A1900"># P_FAIL N_TOT FAIL S_TOT : C_TRIVIAL S_TRIVIAL   C_LOW S_LOW  C_CLUS S_CLUS : FAIL_BP N_BP   C_BP C_BP_AVG C_BP_TOT   S_BP S_OSD</span></span>
      <span style="color: #993399">0.036</span> <span style="color: #993399">1000</span> <span style="color: #993399">36</span> <span style="color: #993399">964</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span>    <span style="color: #993399">24</span> <span style="color: #993399">24</span>   <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">36</span> <span style="color: #993399">959</span>          <span style="color: #993399">507</span> <span style="color: #993399">317</span> <span style="color: #993399">824</span>     <span style="color: #993399">823</span>  <span style="color: #993399">100</span></tt></pre></div></div>
<div class="paragraph"><p>Notice that the success rate is <code>0.036</code>, lower than that of RIS
decoder.  The statistics given includes the total count of converged
BP cases <code>C_BP_TOT=824</code>, which includes convergence with instantaneous
LLR values <code>C_BP=507</code> and those with average LLR values
<code>C_BP_AVG=317</code>.  When BP failed to converge, OSD is used (it converges
always).  The last two columns give separate success counts for BP
alone (<code>S_BP=823</code> out of converged <code>C_BP=824</code>) and OSD (<code>S_OSD=100</code>).</p></div>
<div class="paragraph"><p>The success rate can be improved by increasing the OSD level.
Interestingly, larger number of steps can actually decrease the
performance of the parallel BP decoder:</p></div>
<div class="listingblock">
<div class="title">example B2</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">for</span></span> lerr <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> <span style="color: #993399">0</span> <span style="color: #993399">1</span> <span style="color: #993399">2</span> <span style="color: #993399">3</span> <span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">do</span></span>
    echo <span style="color: #FF0000">"#"</span>
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> steps <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> <span style="color: #993399">5</span> <span style="color: #993399">10</span> <span style="color: #993399">25</span> <span style="color: #993399">50</span> <span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">do</span></span>
        echo -e <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #009900">$lerr</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #009900">$steps</span> <span style="color: #FF0000">" </span><span style="color: #CC33CC">\t</span><span style="color: #FF0000">"</span> <span style="color: #990000">\</span>
            `<span style="color: #990000">.</span>/src/vecdec <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">maxosd</span><span style="color: #990000">=</span><span style="color: #993399">50</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #009900">$steps</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #009900">$lerr</span>  <span style="color: #990000">\</span>
                   <span style="color: #009900">finH</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples<span style="color: #990000">/</span><span style="color: #993399">96.3</span><span style="color: #990000">.</span><span style="color: #993399">963</span><span style="color: #990000">.</span>alist <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #993399">0.05</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">113</span>`
    <span style="font-weight: bold"><span style="color: #0000FF">done</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">done</span></span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">5</span>           <span style="color: #993399">0.063</span> <span style="color: #993399">1000</span> <span style="color: #993399">63</span> <span style="color: #993399">937</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">63</span> <span style="color: #993399">959</span> <span style="color: #993399">471</span> <span style="color: #993399">270</span> <span style="color: #993399">741</span> <span style="color: #993399">741</span> <span style="color: #993399">155</span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10</span>          <span style="color: #993399">0.061</span> <span style="color: #993399">1000</span> <span style="color: #993399">61</span> <span style="color: #993399">939</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">61</span> <span style="color: #993399">959</span> <span style="color: #993399">505</span> <span style="color: #993399">319</span> <span style="color: #993399">824</span> <span style="color: #993399">823</span> <span style="color: #993399">75</span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">25</span>          <span style="color: #993399">0.065</span> <span style="color: #993399">1000</span> <span style="color: #993399">65</span> <span style="color: #993399">935</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">65</span> <span style="color: #993399">959</span> <span style="color: #993399">521</span> <span style="color: #993399">336</span> <span style="color: #993399">857</span> <span style="color: #993399">854</span> <span style="color: #993399">40</span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">50</span>          <span style="color: #993399">0.064</span> <span style="color: #993399">1000</span> <span style="color: #993399">64</span> <span style="color: #993399">936</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">64</span> <span style="color: #993399">959</span> <span style="color: #993399">524</span> <span style="color: #993399">337</span> <span style="color: #993399">861</span> <span style="color: #993399">858</span> <span style="color: #993399">37</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">5</span>           <span style="color: #993399">0.033</span> <span style="color: #993399">1000</span> <span style="color: #993399">33</span> <span style="color: #993399">967</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">33</span> <span style="color: #993399">959</span> <span style="color: #993399">471</span> <span style="color: #993399">270</span> <span style="color: #993399">741</span> <span style="color: #993399">741</span> <span style="color: #993399">185</span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10</span>          <span style="color: #993399">0.036</span> <span style="color: #993399">1000</span> <span style="color: #993399">36</span> <span style="color: #993399">964</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">36</span> <span style="color: #993399">959</span> <span style="color: #993399">507</span> <span style="color: #993399">317</span> <span style="color: #993399">824</span> <span style="color: #993399">823</span> <span style="color: #993399">100</span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">25</span>          <span style="color: #993399">0.037</span> <span style="color: #993399">1000</span> <span style="color: #993399">37</span> <span style="color: #993399">963</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">37</span> <span style="color: #993399">959</span> <span style="color: #993399">523</span> <span style="color: #993399">334</span> <span style="color: #993399">857</span> <span style="color: #993399">854</span> <span style="color: #993399">68</span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">50</span>          <span style="color: #993399">0.037</span> <span style="color: #993399">1000</span> <span style="color: #993399">37</span> <span style="color: #993399">963</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">37</span> <span style="color: #993399">959</span> <span style="color: #993399">526</span> <span style="color: #993399">335</span> <span style="color: #993399">861</span> <span style="color: #993399">858</span> <span style="color: #993399">64</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">5</span>           <span style="color: #993399">0.028</span> <span style="color: #993399">1000</span> <span style="color: #993399">28</span> <span style="color: #993399">972</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">28</span> <span style="color: #993399">959</span> <span style="color: #993399">471</span> <span style="color: #993399">270</span> <span style="color: #993399">741</span> <span style="color: #993399">741</span> <span style="color: #993399">190</span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10</span>          <span style="color: #993399">0.028</span> <span style="color: #993399">1000</span> <span style="color: #993399">28</span> <span style="color: #993399">972</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">28</span> <span style="color: #993399">959</span> <span style="color: #993399">507</span> <span style="color: #993399">317</span> <span style="color: #993399">824</span> <span style="color: #993399">823</span> <span style="color: #993399">108</span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">25</span>          <span style="color: #993399">0.028</span> <span style="color: #993399">1000</span> <span style="color: #993399">28</span> <span style="color: #993399">972</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">28</span> <span style="color: #993399">959</span> <span style="color: #993399">523</span> <span style="color: #993399">334</span> <span style="color: #993399">857</span> <span style="color: #993399">854</span> <span style="color: #993399">77</span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">50</span>          <span style="color: #993399">0.031</span> <span style="color: #993399">1000</span> <span style="color: #993399">31</span> <span style="color: #993399">969</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">31</span> <span style="color: #993399">959</span> <span style="color: #993399">526</span> <span style="color: #993399">335</span> <span style="color: #993399">861</span> <span style="color: #993399">858</span> <span style="color: #993399">70</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">3</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">5</span>           <span style="color: #993399">0.027</span> <span style="color: #993399">1000</span> <span style="color: #993399">27</span> <span style="color: #993399">973</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">27</span> <span style="color: #993399">959</span> <span style="color: #993399">471</span> <span style="color: #993399">270</span> <span style="color: #993399">741</span> <span style="color: #993399">741</span> <span style="color: #993399">191</span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">3</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10</span>          <span style="color: #993399">0.028</span> <span style="color: #993399">1000</span> <span style="color: #993399">28</span> <span style="color: #993399">972</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">28</span> <span style="color: #993399">959</span> <span style="color: #993399">507</span> <span style="color: #993399">317</span> <span style="color: #993399">824</span> <span style="color: #993399">823</span> <span style="color: #993399">108</span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">3</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">25</span>          <span style="color: #993399">0.029</span> <span style="color: #993399">1000</span> <span style="color: #993399">29</span> <span style="color: #993399">971</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">29</span> <span style="color: #993399">959</span> <span style="color: #993399">523</span> <span style="color: #993399">334</span> <span style="color: #993399">857</span> <span style="color: #993399">854</span> <span style="color: #993399">76</span>
<span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">3</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">50</span>          <span style="color: #993399">0.027</span> <span style="color: #993399">1000</span> <span style="color: #993399">27</span> <span style="color: #993399">973</span> <span style="color: #990000">:</span> <span style="color: #993399">6</span> <span style="color: #993399">6</span> <span style="color: #993399">24</span> <span style="color: #993399">24</span> <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">27</span> <span style="color: #993399">959</span> <span style="color: #993399">526</span> <span style="color: #993399">335</span> <span style="color: #993399">861</span> <span style="color: #993399">858</span> <span style="color: #993399">74</span></tt></pre></div></div>
<div class="paragraph"><p>To use BP with serial-<code>C</code> or serial-<code>V</code> update schedules,
respectively, use <code>mode=1.4</code> (bit <code>2</code> set in the <code>submode</code>) and
<code>mode=1.12</code> (both bit <code>2</code> and bit <code>3</code> are set).  Bits <code>0</code> and bits <code>1</code>
are used to specify just instantaneous or just average LLR values,
e.g., <code>mode=1.1</code> for parallel update schedule with instantaneous LLR,
<code>mode=1.14</code> for serial-<code>V</code> update schedule with average LLR.  For this
particular code, mode=1.6 (serial-<code>C</code> with average LLR) gives best
results (notice a much larger sample):</p></div>
<div class="listingblock">
<div class="title">example B4</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">for</span></span> minor <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> <span style="color: #993399">0</span> <span style="color: #993399">1</span> <span style="color: #993399">2</span>  <span style="color: #993399">4</span> <span style="color: #993399">5</span> <span style="color: #993399">6</span> <span style="color: #993399">12</span> <span style="color: #993399">13</span> <span style="color: #993399">14</span> <span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">do</span></span>
    echo <span style="color: #FF0000">"#"</span>
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> steps <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> <span style="color: #993399">10</span> <span style="color: #993399">50</span> <span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">do</span></span>
        echo -e <span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #009900">$minor</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #009900">$steps</span> <span style="color: #FF0000">" </span><span style="color: #CC33CC">\t</span><span style="color: #FF0000">"</span> <span style="color: #990000">\</span>
            `<span style="color: #990000">.</span>/src/vecdec <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">1</span><span style="color: #990000">.</span><span style="color: #009900">$minor</span> <span style="color: #009900">maxosd</span><span style="color: #990000">=</span><span style="color: #993399">50</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #009900">$steps</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #990000">\</span>
                   <span style="color: #009900">finH</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples<span style="color: #990000">/</span><span style="color: #993399">96.3</span><span style="color: #990000">.</span><span style="color: #993399">963</span><span style="color: #990000">.</span>alist <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">100000</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">100000</span> <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #993399">0.05</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">113</span>`
    <span style="font-weight: bold"><span style="color: #0000FF">done</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">done</span></span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10</span>         <span style="color: #993399">0.04106</span> <span style="color: #993399">100000</span> <span style="color: #993399">4106</span> <span style="color: #993399">95894</span> <span style="color: #990000">:</span> <span style="color: #993399">749</span> <span style="color: #993399">749</span> <span style="color: #993399">3686</span> <span style="color: #993399">3686</span> <span style="color: #993399">1005</span> <span style="color: #993399">1005</span> <span style="color: #990000">:</span> <span style="color: #993399">4106</span> <span style="color: #993399">94560</span> <span style="color: #993399">47398</span> <span style="color: #993399">33286</span> <span style="color: #993399">80684</span> <span style="color: #993399">80377</span> <span style="color: #993399">10077</span>
<span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">50</span>         <span style="color: #993399">0.04016</span> <span style="color: #993399">100000</span> <span style="color: #993399">4016</span> <span style="color: #993399">95984</span> <span style="color: #990000">:</span> <span style="color: #993399">749</span> <span style="color: #993399">749</span> <span style="color: #993399">3686</span> <span style="color: #993399">3686</span> <span style="color: #993399">1005</span> <span style="color: #993399">1005</span> <span style="color: #990000">:</span> <span style="color: #993399">4016</span> <span style="color: #993399">94560</span> <span style="color: #993399">49198</span> <span style="color: #993399">35305</span> <span style="color: #993399">84503</span> <span style="color: #993399">83998</span> <span style="color: #993399">6546</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10</span>         <span style="color: #993399">0.04571</span> <span style="color: #993399">100000</span> <span style="color: #993399">4571</span> <span style="color: #993399">95429</span> <span style="color: #990000">:</span> <span style="color: #993399">749</span> <span style="color: #993399">749</span> <span style="color: #993399">3686</span> <span style="color: #993399">3686</span> <span style="color: #993399">1005</span> <span style="color: #993399">1005</span> <span style="color: #990000">:</span> <span style="color: #993399">4571</span> <span style="color: #993399">94560</span> <span style="color: #993399">80019</span> <span style="color: #993399">0</span> <span style="color: #993399">80019</span> <span style="color: #993399">79754</span> <span style="color: #993399">10235</span>
<span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">50</span>         <span style="color: #993399">0.04368</span> <span style="color: #993399">100000</span> <span style="color: #993399">4368</span> <span style="color: #993399">95632</span> <span style="color: #990000">:</span> <span style="color: #993399">749</span> <span style="color: #993399">749</span> <span style="color: #993399">3686</span> <span style="color: #993399">3686</span> <span style="color: #993399">1005</span> <span style="color: #993399">1005</span> <span style="color: #990000">:</span> <span style="color: #993399">4368</span> <span style="color: #993399">94560</span> <span style="color: #993399">84366</span> <span style="color: #993399">0</span> <span style="color: #993399">84366</span> <span style="color: #993399">83871</span> <span style="color: #993399">6321</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10</span>         <span style="color: #993399">0.04108</span> <span style="color: #993399">100000</span> <span style="color: #993399">4108</span> <span style="color: #993399">95892</span> <span style="color: #990000">:</span> <span style="color: #993399">749</span> <span style="color: #993399">749</span> <span style="color: #993399">3686</span> <span style="color: #993399">3686</span> <span style="color: #993399">1005</span> <span style="color: #993399">1005</span> <span style="color: #990000">:</span> <span style="color: #993399">4108</span> <span style="color: #993399">94560</span> <span style="color: #993399">0</span> <span style="color: #993399">80511</span> <span style="color: #993399">80511</span> <span style="color: #993399">80213</span> <span style="color: #993399">10239</span>
<span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">50</span>         <span style="color: #993399">0.04017</span> <span style="color: #993399">100000</span> <span style="color: #993399">4017</span> <span style="color: #993399">95983</span> <span style="color: #990000">:</span> <span style="color: #993399">749</span> <span style="color: #993399">749</span> <span style="color: #993399">3686</span> <span style="color: #993399">3686</span> <span style="color: #993399">1005</span> <span style="color: #993399">1005</span> <span style="color: #990000">:</span> <span style="color: #993399">4017</span> <span style="color: #993399">94560</span> <span style="color: #993399">0</span> <span style="color: #993399">84487</span> <span style="color: #993399">84487</span> <span style="color: #993399">83984</span> <span style="color: #993399">6559</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #993399">4</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10</span>         <span style="color: #993399">0.0397</span> <span style="color: #993399">100000</span> <span style="color: #993399">3970</span> <span style="color: #993399">96030</span> <span style="color: #990000">:</span> <span style="color: #993399">749</span> <span style="color: #993399">749</span> <span style="color: #993399">3686</span> <span style="color: #993399">3686</span> <span style="color: #993399">1005</span> <span style="color: #993399">1005</span> <span style="color: #990000">:</span> <span style="color: #993399">3970</span> <span style="color: #993399">94560</span> <span style="color: #993399">57773</span> <span style="color: #993399">26099</span> <span style="color: #993399">83872</span> <span style="color: #993399">83404</span> <span style="color: #993399">7186</span>
<span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #993399">4</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">50</span>         <span style="color: #993399">0.039</span> <span style="color: #993399">100000</span> <span style="color: #993399">3900</span> <span style="color: #993399">96100</span> <span style="color: #990000">:</span> <span style="color: #993399">749</span> <span style="color: #993399">749</span> <span style="color: #993399">3686</span> <span style="color: #993399">3686</span> <span style="color: #993399">1005</span> <span style="color: #993399">1005</span> <span style="color: #990000">:</span> <span style="color: #993399">3900</span> <span style="color: #993399">94560</span> <span style="color: #993399">59066</span> <span style="color: #993399">26215</span> <span style="color: #993399">85281</span> <span style="color: #993399">84735</span> <span style="color: #993399">5925</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #993399">5</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10</span>         <span style="color: #993399">0.0422</span> <span style="color: #993399">100000</span> <span style="color: #993399">4220</span> <span style="color: #993399">95780</span> <span style="color: #990000">:</span> <span style="color: #993399">749</span> <span style="color: #993399">749</span> <span style="color: #993399">3686</span> <span style="color: #993399">3686</span> <span style="color: #993399">1005</span> <span style="color: #993399">1005</span> <span style="color: #990000">:</span> <span style="color: #993399">4220</span> <span style="color: #993399">94560</span> <span style="color: #993399">83810</span> <span style="color: #993399">0</span> <span style="color: #993399">83810</span> <span style="color: #993399">83350</span> <span style="color: #993399">6990</span>
<span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #993399">5</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">50</span>         <span style="color: #993399">0.04061</span> <span style="color: #993399">100000</span> <span style="color: #993399">4061</span> <span style="color: #993399">95939</span> <span style="color: #990000">:</span> <span style="color: #993399">749</span> <span style="color: #993399">749</span> <span style="color: #993399">3686</span> <span style="color: #993399">3686</span> <span style="color: #993399">1005</span> <span style="color: #993399">1005</span> <span style="color: #990000">:</span> <span style="color: #993399">4061</span> <span style="color: #993399">94560</span> <span style="color: #993399">85268</span> <span style="color: #993399">0</span> <span style="color: #993399">85268</span> <span style="color: #993399">84728</span> <span style="color: #993399">5771</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #993399">6</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10</span>         <span style="color: #993399">0.03964</span> <span style="color: #993399">100000</span> <span style="color: #993399">3964</span> <span style="color: #993399">96036</span> <span style="color: #990000">:</span> <span style="color: #993399">749</span> <span style="color: #993399">749</span> <span style="color: #993399">3686</span> <span style="color: #993399">3686</span> <span style="color: #993399">1005</span> <span style="color: #993399">1005</span> <span style="color: #990000">:</span> <span style="color: #993399">3964</span> <span style="color: #993399">94560</span> <span style="color: #993399">0</span> <span style="color: #993399">83743</span> <span style="color: #993399">83743</span> <span style="color: #993399">83291</span> <span style="color: #993399">7305</span>
<span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #993399">6</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">50</span>         <span style="color: #993399">0.03892</span> <span style="color: #993399">100000</span> <span style="color: #993399">3892</span> <span style="color: #993399">96108</span> <span style="color: #990000">:</span> <span style="color: #993399">749</span> <span style="color: #993399">749</span> <span style="color: #993399">3686</span> <span style="color: #993399">3686</span> <span style="color: #993399">1005</span> <span style="color: #993399">1005</span> <span style="color: #990000">:</span> <span style="color: #993399">3892</span> <span style="color: #993399">94560</span> <span style="color: #993399">0</span> <span style="color: #993399">85248</span> <span style="color: #993399">85248</span> <span style="color: #993399">84720</span> <span style="color: #993399">5948</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #993399">12</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10</span>        <span style="color: #993399">0.03931</span> <span style="color: #993399">100000</span> <span style="color: #993399">3931</span> <span style="color: #993399">96069</span> <span style="color: #990000">:</span> <span style="color: #993399">749</span> <span style="color: #993399">749</span> <span style="color: #993399">3686</span> <span style="color: #993399">3686</span> <span style="color: #993399">1005</span> <span style="color: #993399">1005</span> <span style="color: #990000">:</span> <span style="color: #993399">3931</span> <span style="color: #993399">94560</span> <span style="color: #993399">50316</span> <span style="color: #993399">33424</span> <span style="color: #993399">83740</span> <span style="color: #993399">83298</span> <span style="color: #993399">7331</span>
<span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #993399">12</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">50</span>        <span style="color: #993399">0.03904</span> <span style="color: #993399">100000</span> <span style="color: #993399">3904</span> <span style="color: #993399">96096</span> <span style="color: #990000">:</span> <span style="color: #993399">749</span> <span style="color: #993399">749</span> <span style="color: #993399">3686</span> <span style="color: #993399">3686</span> <span style="color: #993399">1005</span> <span style="color: #993399">1005</span> <span style="color: #990000">:</span> <span style="color: #993399">3904</span> <span style="color: #993399">94560</span> <span style="color: #993399">51468</span> <span style="color: #993399">33861</span> <span style="color: #993399">85329</span> <span style="color: #993399">84785</span> <span style="color: #993399">5871</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #993399">13</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10</span>        <span style="color: #993399">0.04205</span> <span style="color: #993399">100000</span> <span style="color: #993399">4205</span> <span style="color: #993399">95795</span> <span style="color: #990000">:</span> <span style="color: #993399">749</span> <span style="color: #993399">749</span> <span style="color: #993399">3686</span> <span style="color: #993399">3686</span> <span style="color: #993399">1005</span> <span style="color: #993399">1005</span> <span style="color: #990000">:</span> <span style="color: #993399">4205</span> <span style="color: #993399">94560</span> <span style="color: #993399">83645</span> <span style="color: #993399">0</span> <span style="color: #993399">83645</span> <span style="color: #993399">83206</span> <span style="color: #993399">7149</span>
<span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #993399">13</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">50</span>        <span style="color: #993399">0.0408</span> <span style="color: #993399">100000</span> <span style="color: #993399">4080</span> <span style="color: #993399">95920</span> <span style="color: #990000">:</span> <span style="color: #993399">749</span> <span style="color: #993399">749</span> <span style="color: #993399">3686</span> <span style="color: #993399">3686</span> <span style="color: #993399">1005</span> <span style="color: #993399">1005</span> <span style="color: #990000">:</span> <span style="color: #993399">4080</span> <span style="color: #993399">94560</span> <span style="color: #993399">85304</span> <span style="color: #993399">0</span> <span style="color: #993399">85304</span> <span style="color: #993399">84765</span> <span style="color: #993399">5715</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #993399">14</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10</span>        <span style="color: #993399">0.03931</span> <span style="color: #993399">100000</span> <span style="color: #993399">3931</span> <span style="color: #993399">96069</span> <span style="color: #990000">:</span> <span style="color: #993399">749</span> <span style="color: #993399">749</span> <span style="color: #993399">3686</span> <span style="color: #993399">3686</span> <span style="color: #993399">1005</span> <span style="color: #993399">1005</span> <span style="color: #990000">:</span> <span style="color: #993399">3931</span> <span style="color: #993399">94560</span> <span style="color: #993399">0</span> <span style="color: #993399">83603</span> <span style="color: #993399">83603</span> <span style="color: #993399">83165</span> <span style="color: #993399">7464</span>
<span style="color: #009900">minor</span><span style="color: #990000">=</span><span style="color: #993399">14</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">50</span>        <span style="color: #993399">0.03903</span> <span style="color: #993399">100000</span> <span style="color: #993399">3903</span> <span style="color: #993399">96097</span> <span style="color: #990000">:</span> <span style="color: #993399">749</span> <span style="color: #993399">749</span> <span style="color: #993399">3686</span> <span style="color: #993399">3686</span> <span style="color: #993399">1005</span> <span style="color: #993399">1005</span> <span style="color: #990000">:</span> <span style="color: #993399">3903</span> <span style="color: #993399">94560</span> <span style="color: #993399">0</span> <span style="color: #993399">85312</span> <span style="color: #993399">85312</span> <span style="color: #993399">84772</span> <span style="color: #993399">5885</span></tt></pre></div></div>
</div>
</div>
<div class="sect3">
<h4 id="_simulate_the_performance_of_a_quantum_css_code">Simulate the performance of a quantum CSS code</h4>
<div class="paragraph"><p>The only difference is that one additional matrix is needed.  One can
specify, e.g., the CSS generator matrices <code>H=Hx</code> and <code>G=Hz</code>.  The
following example uses <code>{5,5}</code> hyperbolic code with parameters <code>[[40,10,4]]</code>
and uniform <code>2%</code> error probability:</p></div>
<div class="listingblock">
<div class="title">example C1</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #990000">.</span>/src/vecdec <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">7</span> <span style="color: #990000">\</span>
             <span style="color: #009900">finH</span><span style="color: #990000">=</span>input/QX<span style="color: #993399">40</span><span style="color: #990000">.</span>mtx <span style="color: #009900">finG</span><span style="color: #990000">=</span>input/QZ<span style="color: #993399">40</span><span style="color: #990000">.</span>mtx <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #993399">0.02</span> <span style="color: #990000">\</span>
             <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">1000</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># P_FAIL N_TOT FAIL S_TOT : C_TRIVIAL S_TRIVIAL   C_LOW S_LOW  C_CLUS S_CLUS : FAIL_RIS N_RIS S_RIS</span></span>
      <span style="color: #993399">0.042</span> <span style="color: #993399">1000</span> <span style="color: #993399">42</span> <span style="color: #993399">958</span> <span style="color: #990000">:</span> <span style="color: #993399">446</span> <span style="color: #993399">446</span>        <span style="color: #993399">356</span> <span style="color: #993399">356</span>         <span style="color: #993399">12</span> <span style="color: #993399">12</span> <span style="color: #990000">:</span> <span style="color: #993399">42</span> <span style="color: #993399">186</span> <span style="color: #993399">144</span></tt></pre></div></div>
<div class="paragraph"><p>We can also use the BP decoder, e.g., with serial-<code>V</code> schedule based on average LLR</p></div>
<div class="listingblock">
<div class="title">example C2</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #990000">.</span>/src/vecdec <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">1.14</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">7</span> <span style="color: #990000">\</span>
             <span style="color: #009900">finH</span><span style="color: #990000">=</span>input/QX<span style="color: #993399">40</span><span style="color: #990000">.</span>mtx <span style="color: #009900">finG</span><span style="color: #990000">=</span>input/QZ<span style="color: #993399">40</span><span style="color: #990000">.</span>mtx <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #993399">0.02</span> <span style="color: #990000">\</span>
             <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">1000</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># stored 40 errors / 40 distinct syndrome vectors in hash</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># starting round 1 of 1 pfail=0.5 fail=0 total=0</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># generated 1000 det/obs pairs</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># orig clusters: NC=198 an=1.28283 sn=0.50333    ac=3.17323 sc=1.67471   av=13.4921 sv=13.41</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># remaining:     NX=186 an=1.20968 sn=0.407078   ac=3.32444 sc=1.72216   av=14.0711 sv=13.9327</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># P_FAIL N_TOT FAIL S_TOT : C_TRIVIAL S_TRIVIAL   C_LOW S_LOW  C_CLUS S_CLUS : FAIL_BP N_BP   C_BP C_BP_AVG C_BP_TOT   S_BP S_OSD</span></span>
      <span style="color: #993399">0.049</span> <span style="color: #993399">1000</span> <span style="color: #993399">49</span> <span style="color: #993399">951</span> <span style="color: #990000">:</span> <span style="color: #993399">446</span> <span style="color: #993399">446</span>        <span style="color: #993399">356</span> <span style="color: #993399">356</span>         <span style="color: #993399">12</span> <span style="color: #993399">12</span> <span style="color: #990000">:</span> <span style="color: #993399">49</span> <span style="color: #993399">186</span>          <span style="color: #993399">0</span> <span style="color: #993399">156</span> <span style="color: #993399">156</span>       <span style="color: #993399">129</span>  <span style="color: #993399">8</span></tt></pre></div></div>
<div class="paragraph"><p>Alternatively, one can use a DEM (detector error model) file output by
<code>stim</code>, which specifies matrices <code>H=Hx</code> and <code>L=Lx</code> and the probability
vector.  The probabilities can be scaled using <code>mulP</code> parameter.  This
example uses distance-5 rotated surface code with the "standard"
circuit error model (4 error types) and the uniform error probability
<code>p=0.3%</code> (the <code>stim</code> commands for decoding are commented out).</p></div>
<div class="listingblock">
<div class="title">example C3</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># stim=../Stim/out/stim</span></span>
<span style="color: #009900">dist</span><span style="color: #990000">=</span><span style="color: #993399">5</span>
<span style="color: #009900">p1</span><span style="color: #990000">=</span><span style="color: #993399">0.003</span>
<span style="font-style: italic"><span style="color: #9A1900"># # construct `stim` file</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># $stim gen --code surface_code --task rotated_memory_x \</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#       --distance $dist --rounds $dist \</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#       --after_clifford_depolarization $p1 \</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#       --after_reset_flip_probability $p1 \</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#       --before_round_data_depolarization $p1 \</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#       --before_measure_flip_probability $p1 \</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#       &gt; examples/surf_d$dist.stim</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># # generate the corresponding DEM file</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># $stim analyze_errors --in examples/surf_d${dist}.stim &gt; examples/surf_d${dist}.dem</span></span>
echo <span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #009900">dist</span><span style="color: #990000">=</span><span style="color: #009900">$dist</span> <span style="color: #009900">p1</span><span style="color: #990000">=</span><span style="color: #009900">$p1</span>
<span style="color: #990000">.</span>/src/vecdec <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">7</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">5000</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">fdem</span><span style="color: #990000">=</span>examples/surf_d<span style="color: #009900">${dist}</span><span style="color: #990000">.</span>dem <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #993399">2</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #009900">dist</span><span style="color: #990000">=</span><span style="color: #993399">5</span> <span style="color: #009900">p1</span><span style="color: #990000">=</span><span style="color: #993399">0.003</span>
<span style="font-style: italic"><span style="color: #9A1900"># opening DEM file examples/surf_d5.dem</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read DEM examples/surf_d5.dem: rows_H=120 rows_L=1 cols=1679; nz_H=5008 nz_L=140</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># mode=0, running vecdec RIS decoder : generating errors internally</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># mode=0 submode=0: use RIS decoder</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># RIS decoder parameters: steps=5000 swait=0 lerr=1</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># ntot=1000 nvec=1000 nfail=0</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># uW=2, adding errors of weight up to 2 to syndrome hash</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># uX=0, will not use partially matched errors for pre-decoding</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># stored 1410360 errors / 1316533 distinct syndrome vectors in hash</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># starting round 1 of 1</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># generated 1000 det/obs pairs</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># P_FAIL N_TOT FAIL S_TOT : C_TRIVIAL S_TRIVIAL   C_LOW S_LOW  C_CLUS S_CLUS : FAIL_RIS N_RIS S_RIS</span></span>
      <span style="color: #993399">0.003</span> <span style="color: #993399">1000</span> <span style="color: #993399">3</span> <span style="color: #993399">997</span> <span style="color: #990000">:</span> <span style="color: #993399">83</span> <span style="color: #993399">83</span>   <span style="color: #993399">445</span> <span style="color: #993399">445</span>         <span style="color: #993399">340</span> <span style="color: #993399">339</span> <span style="color: #990000">:</span> <span style="color: #993399">2</span> <span style="color: #993399">132</span> <span style="color: #993399">130</span></tt></pre></div></div>
<div class="paragraph"><p>Notice that this error probability is about a third of the threshold
value, and the pre-decoder (using <code>uW=2</code>) is able to match about <code>87%</code> of the
syndrome vectors with a very good success rate.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_find_the_distance_of_a_classical_or_quantum_code_and_estimate_the_ler">Find the distance of a classical or quantum code and estimate the LER.</h3>
<div class="paragraph"><p>The program in <code>mode=2</code> uses RIS algorithm to enumerate small-weight
codewords and estimate the LER based on the codewords available.  The
list of codewords can be exported to and imported from a file and
therefore reused with a different set of error probabilities.</p></div>
<div class="paragraph"><p>The following example uses <code>100,000</code> RIS steps to enumerate codewords
of weight up to <code>dW=10</code> above the minimum weight found (for this particular
code the code distance <code>minW=6</code>) and write them to a file <code>tmp.nz</code>.</p></div>
<div class="listingblock">
<div class="title">example D1</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#!/usr/bin/bash -f</span></span>
<span style="color: #990000">.</span>/src/vecdec <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">2.1</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">100000</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">7</span> <span style="color: #009900">finH</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples<span style="color: #990000">/</span><span style="color: #993399">96.3</span><span style="color: #990000">.</span><span style="color: #993399">963</span><span style="color: #990000">.</span>alist <span style="color: #990000">\</span>
             <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #993399">0.05</span> <span style="color: #009900">outC</span><span style="color: #990000">=</span>tmp<span style="color: #990000">.</span>nz <span style="color: #009900">dW</span><span style="color: #990000">=</span><span style="color: #993399">10</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># Could not process Matrix Market banner; try 'alist' format</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read alist file ./examples/96.3.963.alist (transposed): rows=48 cols=96 nz=288</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># Analyze small-weight codewords in 100000 RIS steps; swait=0</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># maxC=0 dE=-1 dW=10 maxW=0</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># calculating est fail prob, exact fail prob, minimum weight</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># mode=2, estimating fail probability in 100000 steps</span></span>
<span style="color: #009900">nz</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">cnt</span><span style="color: #990000">=</span><span style="color: #993399">32</span> <span style="color: #009900">energ</span><span style="color: #990000">=</span><span style="color: #993399">94.2188</span>
<span style="color: #009900">nz</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">cnt</span><span style="color: #990000">=</span><span style="color: #993399">24</span> <span style="color: #009900">energ</span><span style="color: #990000">=</span><span style="color: #993399">70.6641</span>
<span style="color: #009900">nz</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">cnt</span><span style="color: #990000">=</span><span style="color: #993399">12</span> <span style="color: #009900">energ</span><span style="color: #990000">=</span><span style="color: #993399">35.332</span>
<span style="color: #009900">nz</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">cnt</span><span style="color: #990000">=</span><span style="color: #993399">10</span> <span style="color: #009900">energ</span><span style="color: #990000">=</span><span style="color: #993399">29.4434</span>
<span style="color: #009900">nz</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">cnt</span><span style="color: #990000">=</span><span style="color: #993399">8</span> <span style="color: #009900">energ</span><span style="color: #990000">=</span><span style="color: #993399">23.5547</span>
<span style="color: #009900">nz</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">cnt</span><span style="color: #990000">=</span><span style="color: #993399">6</span> <span style="color: #009900">energ</span><span style="color: #990000">=</span><span style="color: #993399">17.666</span>
<span style="font-style: italic"><span style="color: #9A1900"># try to remove reducible codewords dx=1 ...</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># scanned for reducible codewords, found none of 195690</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># done</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># sumP(fail) maxP(fail) min_weight N_min N_use N_tot</span></span>
<span style="color: #993399">0.657861</span> <span style="color: #993399">0.006859</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">195690</span> <span style="color: #993399">195690</span>
<span style="font-style: italic"><span style="color: #9A1900"># wrote 195690 computed codewords to file tmp.nz</span></span></tt></pre></div></div>
<div class="paragraph"><p>Notice that the minimum weight <code>min_weight=6</code> of a codeword found is
the third number in the output line; only <code>N_min=3</code> codewords of such
weight have been found.  Overall, in this particular run, <code>195690</code>
codewords have been generated; more codewords can be found by
repeatedly running the same command line (with a different seed, or by
setting <code>seed=0</code>) after reading the codewords (only the last lines of
the output are shown):</p></div>
<div class="listingblock">
<div class="title">example D2</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#!/usr/bin/bash -f</span></span>
<span style="color: #990000">.</span>/src/vecdec <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">2.1</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">100000</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">finH</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples<span style="color: #990000">/</span><span style="color: #993399">96.3</span><span style="color: #990000">.</span><span style="color: #993399">963</span><span style="color: #990000">.</span>alist <span style="color: #990000">\</span>
             <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #993399">0.05</span> <span style="color: #009900">outC</span><span style="color: #990000">=</span>tmp<span style="color: #990000">.</span>nz <span style="color: #009900">finC</span><span style="color: #990000">=</span>tmp<span style="color: #990000">.</span>nz <span style="color: #009900">dW</span><span style="color: #990000">=</span><span style="color: #993399">10</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># try to remove reducible codewords dx=1 ...</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># scanned for reducible codewords, found none of 210918</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># done</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># sumP(fail) maxP(fail) min_weight N_min N_use N_tot</span></span>
<span style="color: #993399">0.683724</span> <span style="color: #993399">0.006859</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">210918</span> <span style="color: #993399">210918</span>
<span style="font-style: italic"><span style="color: #9A1900"># wrote 210918 computed codewords to file tmp.nz</span></span></tt></pre></div></div>
<div class="paragraph"><p>In a particular run, <code>210918</code> codewords were written to the file.  The
computed codewords can be used to estimate the BER, e.g, by running a
<code>bash</code> script</p></div>
<div class="listingblock">
<div class="title">example D3</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#!/usr/bin/bash -f</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">((</span><span style="color: #009900">w</span><span style="color: #990000">=</span><span style="color: #993399">6</span><span style="color: #990000">;</span> w<span style="color: #990000">&lt;=</span><span style="color: #993399">16</span><span style="color: #990000">;</span> w<span style="color: #990000">++))</span> <span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">do</span></span>
  echo <span style="color: #009900">$w</span> `src/vecdec <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">2.1</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #990000">\</span>
              <span style="color: #009900">finH</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples<span style="color: #990000">/</span><span style="color: #993399">96.3</span><span style="color: #990000">.</span><span style="color: #993399">963</span><span style="color: #990000">.</span>alist <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #993399">0.05</span> <span style="color: #009900">finC</span><span style="color: #990000">=</span>tmp<span style="color: #990000">.</span>nz <span style="color: #009900">maxW</span><span style="color: #990000">=</span><span style="color: #009900">$w</span>`
<span style="font-weight: bold"><span style="color: #0000FF">done</span></span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #993399">6</span> <span style="color: #993399">0.020577</span> <span style="color: #993399">0.006859</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">3</span> <span style="color: #993399">3</span>
<span style="color: #993399">7</span> <span style="color: #993399">0.020577</span> <span style="color: #993399">0.006859</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">3</span> <span style="color: #993399">3</span>
<span style="color: #993399">8</span> <span style="color: #993399">0.051854</span> <span style="color: #993399">0.006859</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">27</span> <span style="color: #993399">27</span>
<span style="color: #993399">9</span> <span style="color: #993399">0.051854</span> <span style="color: #993399">0.006859</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">27</span> <span style="color: #993399">27</span>
<span style="color: #993399">10</span> <span style="color: #993399">0.100138</span> <span style="color: #993399">0.006859</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">222</span> <span style="color: #993399">222</span>
<span style="color: #993399">11</span> <span style="color: #993399">0.100138</span> <span style="color: #993399">0.006859</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">222</span> <span style="color: #993399">222</span>
<span style="color: #993399">12</span> <span style="color: #993399">0.190795</span> <span style="color: #993399">0.006859</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">2149</span> <span style="color: #993399">2149</span>
<span style="color: #993399">13</span> <span style="color: #993399">0.190795</span> <span style="color: #993399">0.006859</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">2149</span> <span style="color: #993399">2149</span>
<span style="color: #993399">14</span> <span style="color: #993399">0.361757</span> <span style="color: #993399">0.006859</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">21275</span> <span style="color: #993399">21275</span>
<span style="color: #993399">15</span> <span style="color: #993399">0.361757</span> <span style="color: #993399">0.006859</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">21275</span> <span style="color: #993399">21275</span>
<span style="color: #993399">16</span> <span style="color: #993399">0.683706</span> <span style="color: #993399">0.006859</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">210840</span> <span style="color: #993399">210840</span></tt></pre></div></div>
<div class="paragraph"><p>The second column is a greedy estimate for the LER (sum over
contributions for each codeword), the third is the single maximum term
in the sum, the fourth is the minimum weight of a codeword, and the
last column is the total number of codewords used in the estimate.
Clearly, the error probability <code>0.05</code> is too high for good convergence
(in fact, this value is close to the threshold for this code).  With a
smaller error probability <code>useP=0.01</code>, a much better convergence is
achieved:</p></div>
<div class="listingblock">
<div class="title">example D4</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#!/usr/bin/bash -f</span></span>
<span style="color: #009900">p1</span><span style="color: #990000">=</span><span style="color: #993399">0.01</span>
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">((</span><span style="color: #009900">w</span><span style="color: #990000">=</span><span style="color: #993399">11</span><span style="color: #990000">;</span> w<span style="color: #990000">&lt;=</span><span style="color: #993399">15</span><span style="color: #990000">;</span> w<span style="color: #990000">+=</span><span style="color: #993399">2</span><span style="color: #990000">))</span> <span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">do</span></span>
    echo <span style="color: #009900">maxW</span><span style="color: #990000">=</span><span style="color: #009900">$w</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">2.1</span> `src/vecdec <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">2.1</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #990000">\</span>
              <span style="color: #009900">finH</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples<span style="color: #990000">/</span><span style="color: #993399">96.3</span><span style="color: #990000">.</span><span style="color: #993399">963</span><span style="color: #990000">.</span>alist <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #009900">$p1</span> <span style="color: #009900">finC</span><span style="color: #990000">=</span>tmp<span style="color: #990000">.</span>nz <span style="color: #009900">maxW</span><span style="color: #990000">=</span><span style="color: #009900">$w</span>`
<span style="font-weight: bold"><span style="color: #0000FF">done</span></span>
echo <span style="color: #FF0000">"#"</span>
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">((</span><span style="color: #009900">w</span><span style="color: #990000">=</span><span style="color: #993399">11</span><span style="color: #990000">;</span> w<span style="color: #990000">&lt;=</span><span style="color: #993399">15</span><span style="color: #990000">;</span> w<span style="color: #990000">+=</span><span style="color: #993399">2</span><span style="color: #990000">))</span> <span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">do</span></span>
    echo <span style="color: #009900">maxW</span><span style="color: #990000">=</span><span style="color: #009900">$w</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">2.2</span> `src/vecdec <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">2.2</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #990000">\</span>
              <span style="color: #009900">finH</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples<span style="color: #990000">/</span><span style="color: #993399">96.3</span><span style="color: #990000">.</span><span style="color: #993399">963</span><span style="color: #990000">.</span>alist <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #009900">$p1</span> <span style="color: #009900">finC</span><span style="color: #990000">=</span>tmp<span style="color: #990000">.</span>nz <span style="color: #009900">maxW</span><span style="color: #990000">=</span><span style="color: #009900">$w</span>`
<span style="font-weight: bold"><span style="color: #0000FF">done</span></span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #009900">maxW</span><span style="color: #990000">=</span><span style="color: #993399">11</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">2.1</span> <span style="color: #993399">0.000264306</span> <span style="color: #993399">6.20991e-05</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">222</span> <span style="color: #993399">222</span>
<span style="color: #009900">maxW</span><span style="color: #990000">=</span><span style="color: #993399">13</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">2.1</span> <span style="color: #993399">0.000271737</span> <span style="color: #993399">6.20991e-05</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">2149</span> <span style="color: #993399">2149</span>
<span style="color: #009900">maxW</span><span style="color: #990000">=</span><span style="color: #993399">15</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">2.1</span> <span style="color: #993399">0.000274658</span> <span style="color: #993399">6.20991e-05</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">21275</span> <span style="color: #993399">21275</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #009900">maxW</span><span style="color: #990000">=</span><span style="color: #993399">11</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">2.2</span> <span style="color: #993399">4.0128e-05</span> <span style="color: #993399">9.8506e-06</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">222</span> <span style="color: #993399">222</span>
<span style="color: #009900">maxW</span><span style="color: #990000">=</span><span style="color: #993399">13</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">2.2</span> <span style="color: #993399">4.09808e-05</span> <span style="color: #993399">9.8506e-06</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">2149</span> <span style="color: #993399">2149</span>
<span style="color: #009900">maxW</span><span style="color: #990000">=</span><span style="color: #993399">15</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">2.2</span> <span style="color: #993399">4.12922e-05</span> <span style="color: #993399">9.8506e-06</span> <span style="color: #993399">6</span> <span style="color: #993399">3</span> <span style="color: #993399">21275</span> <span style="color: #993399">21275</span></tt></pre></div></div>
<div class="paragraph"><p>In the second set, <code>mode=2.2</code> is used, instructing <code>vecdec</code> to use
<code>exact</code> prefactor for each error vector found.</p></div>
<div class="paragraph"><p>A much longer run over a million error samples in <code>mode=0</code> with parameters
<code>steps=1000 lerr=1</code> (which gives nearly optimal minimum-weight
decoding of this code) gives</p></div>
<div class="listingblock">
<div class="title">example D5</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #009900">p1</span><span style="color: #990000">=</span><span style="color: #993399">0.01</span>
<span style="color: #990000">.</span>/src/vecdec <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">7</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">1</span><span style="color: #990000">\</span>
             <span style="color: #009900">finH</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples<span style="color: #990000">/</span><span style="color: #993399">96.3</span><span style="color: #990000">.</span><span style="color: #993399">963</span><span style="color: #990000">.</span>alist <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #009900">$p1</span> <span style="color: #990000">\</span>
             <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">1000000</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">100000</span> <span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #993399">2</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># P_FAIL N_TOT FAIL S_TOT : C_TRIVIAL S_TRIVIAL   C_LOW S_LOW  C_CLUS S_CLUS : FAIL_RIS N_RIS S_RIS</span></span>
    <span style="color: #993399">5.9e-05</span> <span style="color: #993399">1000000</span> <span style="color: #993399">59</span> <span style="color: #993399">999941</span> <span style="color: #990000">:</span> <span style="color: #993399">380862</span> <span style="color: #993399">380862</span>    <span style="color: #993399">547124</span> <span style="color: #993399">547124</span>   <span style="color: #993399">2093</span> <span style="color: #993399">2093</span> <span style="color: #990000">:</span> <span style="color: #993399">59</span> <span style="color: #993399">69921</span> <span style="color: #993399">69862</span></tt></pre></div></div>
<div class="paragraph"><p>gives the BER of <code>5.9e-5</code> (<code>59</code> failed out of <code>1000000</code>), which
compares well with the <code>mode=2.2</code> greedy estimate of <code>4.1e-5</code> based on an
incomplete set of codewords.</p></div>
</div>
<div class="sect2">
<h3 id="_export_code_matrices_to_matrix_market_code_mmx_code_or_code_dem_code_files">Export code matrices to Matrix Market (<code>MMX</code>) or <code>DEM</code> files</h3>
<div class="paragraph"><p>Use <code>mode=3</code>.  Create all five matrices (<code>H=Hx</code>, <code>G=Hz</code>, <code>L=Lx</code>, <code>K=Lz</code>)
and the probability vector <code>P</code> from the DEM file
<code>./examples/surf_d3.dem</code>:</p></div>
<div class="listingblock">
<div class="title">example E1</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #990000">.</span>/src/vecdec <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">3</span> <span style="color: #009900">fdem</span><span style="color: #990000">=.</span>/examples/surf_d3<span style="color: #990000">.</span>dem <span style="color: #009900">fout</span><span style="color: #990000">=</span>tmp</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># opening DEM file ./examples/surf_d3.dem</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read DEM ./examples/surf_d3.dem: rows_H=24 rows_L=1 cols=221; nz_H=568 nz_L=36</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># Output matrices</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># writing H=Hx matrix [ 24 x 221 ] to   tmpH.mmx</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># writing L=Lx matrix [ 1 x 221 ] to    tmpL.mmx</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># writing P vector [ 221 ] to           tmpP.mmx</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># quantum code parameters: n=221 k=1 rkH=24 rkG=196</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># creating G=Hz matrix and writing to   tmpG.mmx</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># n=221 k=1 rankG=196</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># Created matrix G of size 726 x 221 (all weight-3 rows)</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># creating K=Lz matrix and writing to   tmpK.mmx</span></span></tt></pre></div></div>
<div class="paragraph"><p>This creates the files <code>tmpH.mmx</code>, <code>tmpL.mmx</code>, <code>tmpG.mmx</code>,
<code>tmpK.mmax</code>, and <code>tmpP.mmx</code>.  To ensure that the generator matrix
<code>G=Hx</code> has smallest possible row weights, first generate the <strong>classical</strong>
codewords orthogonal to <code>H</code></p></div>
<div class="listingblock">
<div class="title">example E2</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #990000">.</span>/src/vecdec <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #009900">finH</span><span style="color: #990000">=</span>tmpH<span style="color: #990000">.</span>mmx <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #993399">0.01</span> <span style="color: #009900">outC</span><span style="color: #990000">=</span>tmp<span style="color: #990000">.</span>nz <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10000</span> <span style="color: #009900">dW</span><span style="color: #990000">=</span><span style="color: #993399">0</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># initializing seed=38001768132 from time(NULL)+1000000ul*getpid()+0</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># Analyze small-weight codewords in 10000 RIS steps; swait=0</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># maxC=0 dE=-1 dW=0 maxW=0</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># calculating minimum weight</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># mode=2, estimating fail probability in 10000 steps</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># nz=1 cnt=4 energ=18.3809</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># nz=1 cnt=3 energ=13.7856</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># try to remove reducible codewords dx=1 ...</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># scanned for reducible codewords, found none of 862</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># done</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># min_weight N_min N_use N_tot</span></span>
<span style="color: #993399">3</span> <span style="color: #993399">854</span> <span style="color: #993399">862</span> <span style="color: #993399">862</span>
<span style="font-style: italic"><span style="color: #9A1900"># wrote 862 computed codewords to file tmp.nz</span></span></tt></pre></div></div>
<div class="paragraph"><p>Here <code>dW=0</code> limits the codewords to the minimum weight found, in this
case <code>minW=3</code>, which gives <code>862</code> distinct vectors (you may need to
increase <code>dW</code> if program fails to create <code>G</code> matrix in the next step).</p></div>
<div class="paragraph"><p>Second, generate the corresponding <code>G</code> matrix.  Notice that this will
generally create a matrix with redundant rows using all available
vectors; use explicit <code>maxW=3</code> to limit the row weights:</p></div>
<div class="listingblock">
<div class="title">example E3</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #990000">.</span>/src/vecdec <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">3.1</span> <span style="color: #009900">fdem</span><span style="color: #990000">=.</span>/examples/surf_d3<span style="color: #990000">.</span>dem  <span style="color: #990000">\</span>
        <span style="color: #009900">finC</span><span style="color: #990000">=</span>tmp<span style="color: #990000">.</span>nz <span style="color: #009900">maxW</span><span style="color: #990000">=</span><span style="color: #993399">3</span> <span style="color: #009900">fout</span><span style="color: #990000">=</span>tmp</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># opening DEM file ./examples/surf_d3.dem</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read DEM ./examples/surf_d3.dem: rows_H=24 rows_L=1 cols=221; nz_H=568 nz_L=36</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># Output G=Hz matrices</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read 854 codewords from tmp.nz, total 854</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># quantum code parameters: n=221 k=1 rkH=24 rkG=196</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># creating G=Hz matrix and writing to   tmpG.mmx</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># num_need=196 rows=221 cols=1 minW=3 maxW=3</span></span></tt></pre></div></div>
<div class="paragraph"><p>This creates the file <code>tmpG.mmx</code> with <code>726</code> rows.  The logical
generator matrices for quantum codes should always have exactly <code>k</code>
rows.  The matrix <code>K=Lz</code> with guaranteed minimum weight rows can be
created from the same set of codewords, e.g.,</p></div>
<div class="listingblock">
<div class="title">example E4</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #990000">.</span>/src/vecdec <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">3.3</span> <span style="color: #009900">fdem</span><span style="color: #990000">=.</span>/examples/surf_d3<span style="color: #990000">.</span>dem  <span style="color: #009900">finC</span><span style="color: #990000">=</span>tmp<span style="color: #990000">.</span>nz <span style="color: #009900">maxW</span><span style="color: #990000">=</span><span style="color: #993399">3</span> <span style="color: #009900">fout</span><span style="color: #990000">=</span>tmp</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># opening DEM file ./examples/surf_d3.dem</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read DEM ./examples/surf_d3.dem: rows_H=24 rows_L=1 cols=221; nz_H=568 nz_L=36</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># Output G=Hz K=Lz matrices</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read 854 codewords from tmp.nz, total 854</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># quantum code parameters: n=221 k=1 rkH=24 rkG=196</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># creating G=Hz matrix and writing to   tmpG.mmx</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># num_need=196 rows=221 cols=1 minW=3 maxW=3</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># creating K=Lz matrix and writing to   tmpK.mmx</span></span></tt></pre></div></div>
<div class="paragraph"><p>which creates both <code>G</code> and <code>K</code> matrices.  Of course, to create a
<code>K=Lz</code> matrix, <strong>quantum</strong> codewords created directly from the <code>DEM</code> file can also be used.</p></div>
<div class="paragraph"><p>To create a DEM file (e.g., from <code>H</code> and <code>L</code> matrices and a <code>P</code> vector), use <code>mode=3.64</code>.
Bit <code>6</code> must be the only bit set in the <code>submode</code> bitmap (otherwise an error will result).</p></div>
<div class="listingblock">
<div class="title">example E5</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #990000">.</span>/src/vecdec <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">3.64</span> <span style="color: #009900">finH</span><span style="color: #990000">=</span>tmpH<span style="color: #990000">.</span>mmx <span style="color: #009900">finL</span><span style="color: #990000">=</span>tmpL<span style="color: #990000">.</span>mmx <span style="color: #009900">finP</span><span style="color: #990000">=</span>tmpP<span style="color: #990000">.</span>mmx <span style="color: #009900">mulP</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #009900">fout</span><span style="color: #990000">=</span>try</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># read 221 probability values from tmpP.mmx</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># Write DEM file</span></span></tt></pre></div></div>
<div class="paragraph"><p>This created a DEM file <code>tryD.dem</code> with the error probability values
scaled by a factor <code>mulP=2</code>.  The file can be used, e.g., as an input
to <code>Stim</code>, to generate errors/det/obs files externally.</p></div>
</div>
<div class="sect2">
<h3 id="_use_externally_generated_vectors">Use externally generated vectors</h3>
<div class="sect3">
<h4 id="_simple_examples">Simple examples</h4>
<div class="paragraph"><p>In addition to internal sampler, externally generated error vectors,
detector events, or observables can be used.  These can be generated, e.g.,
with the help of <code>Stim</code>:</p></div>
<div class="listingblock">
<div class="title">example X1</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #009900">stim</span><span style="color: #990000">=..</span>/Stim/out/stim <span style="font-style: italic"><span style="color: #9A1900"># location of `stim` command-line binary</span></span>
<span style="color: #009900">$stim</span> sample_dem --shots <span style="color: #993399">5000</span> --in <span style="color: #990000">.</span>/examples/surf_d3<span style="color: #990000">.</span>dem <span style="color: #990000">\</span>
        --out tmp_det<span style="color: #990000">.</span><span style="color: #993399">01</span> --out_format <span style="color: #993399">01</span> <span style="color: #990000">\</span>
        --obs_out tmp_obs<span style="color: #990000">.</span><span style="color: #993399">01</span> --obs_out_format <span style="color: #993399">01</span>
src/vecdec <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">fdet</span><span style="color: #990000">=</span>tmp_det<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">fobs</span><span style="color: #990000">=</span>tmp_obs<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">fdem</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples/surf_d3<span style="color: #990000">.</span>dem <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">2500</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">5000</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># initializing seed=86963779709 from time(NULL)+1000000ul*getpid()+0</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># opening DEM file ./examples/surf_d3.dem</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read DEM ./examples/surf_d3.dem: rows_H=24 rows_L=1 cols=221; nz_H=568 nz_L=36</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># mode=0, running vecdec RIS decoder : use DET and OBS files</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># mode=0 submode=0: use RIS decoder</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># RIS decoder parameters: steps=1000 swait=0 lerr=-1</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># ntot=5000 nvec=2500 nfail=0</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># uW=1, adding errors of weight up to 1 to syndrome hash</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># uX=0, will not use partially matched errors for pre-decoding</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># stored 221 errors / 221 distinct syndrome vectors in hash</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># starting round 1 of 2</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read 2500 det/obs pairs</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># starting round 2 of 2 pfail=0.0172 fail=43 out of total=2500</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read 2500 det/obs pairs</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># P_FAIL N_TOT FAIL S_TOT : C_TRIVIAL S_TRIVIAL   C_LOW S_LOW  C_CLUS S_CLUS : FAIL_RIS N_RIS S_RIS</span></span>
     <span style="color: #993399">0.0182</span> <span style="color: #993399">5000</span> <span style="color: #993399">91</span> <span style="color: #993399">4909</span> <span style="color: #990000">:</span> <span style="color: #993399">2113</span> <span style="color: #993399">2113</span>     <span style="color: #993399">1919</span> <span style="color: #993399">1908</span>       <span style="color: #993399">386</span> <span style="color: #993399">367</span> <span style="color: #990000">:</span> <span style="color: #993399">61</span> <span style="color: #993399">582</span> <span style="color: #993399">521</span></tt></pre></div></div>
<div class="paragraph"><p>Instead of decoding, generated or constructed detector events and
observables in <code>mode=0</code> and <code>mode=1</code> can be written to files.  The
file names are set by the command line arguments <code>gdet=...</code> and
<code>gobs=...</code>  For example:</p></div>
<div class="listingblock">
<div class="title">example X2</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="color: #990000">.</span>/src/vecdec <span style="color: #009900">fdem</span><span style="color: #990000">=</span> input/rep_code3<span style="color: #990000">.</span>dem <span style="color: #009900">gdet</span><span style="color: #990000">=</span>tmpA<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">gobs</span><span style="color: #990000">=</span>tmpB<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">1500</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">mulP</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #009900">uW</span><span style="color: #990000">=</span>-<span style="color: #993399">1</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># initializing seed=86966779709 from time(NULL)+1000000ul*getpid()+0</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># opening DEM file input/rep_code3.dem</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read DEM input/rep_code3.dem: rows_H=8 rows_L=1 cols=9; nz_H=16 nz_L=1</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># mode=0, running vecdec RIS decoder : generating errors internally</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># mode=0 submode=0: use RIS decoder</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># RIS decoder parameters: steps=0 swait=0 lerr=-1</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># ntot=1500 nvec=1000 nfail=0</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># uW=-1, will not use cluster-based pre-decoder</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># starting round 1 of 2</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># generated 1000 det/obs pairs</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># starting round 2 of 2 pfail=0.252 fail=252 out of total=1000</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># generated 1000 det/obs pairs</span></span></tt></pre></div></div>
<div class="paragraph"><p>Here <code>steps=0 uW=-1</code> are used to ensure that the decoder is
not run. Respectively, there is no output with the results.  Note that
since <code>ntot</code> and <code>nvec</code> are not commensurate, this writes <code>2000</code>
lines to each of the output files <code>tmpA.01</code> and <code>tmpB.01</code>.  When exact
count is important, make sure <code>ntot</code> be divisible by <code>nvec</code>.</p></div>
<div class="paragraph"><p>In addition, actual error vectors can be read from a file using the
command line argument <code>ferr=[file_name]</code>.  As a reminder, with a
binary error vector <code>e</code>, the corresponding detector events are the
syndrome bits <code>H*e</code>, and observable bits are <code>L*e</code>.</p></div>
<div class="paragraph"><p>Similarly, in <code>mode=0</code> and <code>mode=1</code>, the predicted error vectors,
detector events, and observables can be written to <code>01</code> files.  For
example, with the files created above, run</p></div>
<div class="listingblock">
<div class="title">example X3</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>src/vecdec <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">fdet</span><span style="color: #990000">=</span>tmp_det<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">fobs</span><span style="color: #990000">=</span>tmp_obs<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #990000">\</span>
           <span style="color: #009900">fdem</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples/surf_d3<span style="color: #990000">.</span>dem <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">2500</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">5000</span> <span style="color: #990000">\</span>
           <span style="color: #009900">perr</span><span style="color: #990000">=</span>tmp_E<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">pdet</span><span style="color: #990000">=</span>tmp_D<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">pobs</span><span style="color: #990000">=</span>tmp_L<span style="color: #990000">.</span><span style="color: #993399">01</span>
<span style="color: #009900">det_mism</span><span style="color: #990000">=</span>`paste tmp_D<span style="color: #990000">.</span><span style="color: #993399">01</span> tmp_det<span style="color: #990000">.</span><span style="color: #993399">01</span> -d<span style="color: #FF0000">" "</span><span style="color: #990000">|</span> grep -E -c -v <span style="color: #FF0000">'^([01]+) </span><span style="color: #CC33CC">\1</span><span style="color: #FF0000">$'</span>`
<span style="color: #009900">obs_mism</span><span style="color: #990000">=</span>`paste tmp_L<span style="color: #990000">.</span><span style="color: #993399">01</span> tmp_obs<span style="color: #990000">.</span><span style="color: #993399">01</span> -d<span style="color: #FF0000">" "</span><span style="color: #990000">|</span> grep -E -c -v <span style="color: #FF0000">'^([01]+) </span><span style="color: #CC33CC">\1</span><span style="color: #FF0000">$'</span>`
echo mismatched det<span style="color: #990000">:</span> <span style="color: #009900">$det_mism</span> obs<span style="color: #990000">:</span> <span style="color: #009900">$obs_mism</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># initializing seed=86969779709 from time(NULL)+1000000ul*getpid()+0</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># opening DEM file ./examples/surf_d3.dem</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read DEM ./examples/surf_d3.dem: rows_H=24 rows_L=1 cols=221; nz_H=568 nz_L=36</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># mode=0, running vecdec RIS decoder : use DET and OBS files</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># mode=0 submode=0: use RIS decoder</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># RIS decoder parameters: steps=1000 swait=0 lerr=-1</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># ntot=5000 nvec=2500 nfail=0</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># uW=1, adding errors of weight up to 1 to syndrome hash</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># uX=0, will not use partially matched errors for pre-decoding</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># stored 221 errors / 221 distinct syndrome vectors in hash</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># starting round 1 of 2</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read 2500 det/obs pairs</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># starting round 2 of 2 pfail=0.0164 fail=41 out of total=2500</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read 2500 det/obs pairs</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># P_FAIL N_TOT FAIL S_TOT : C_TRIVIAL S_TRIVIAL   C_LOW S_LOW  C_CLUS S_CLUS : FAIL_RIS N_RIS S_RIS</span></span>
     <span style="color: #993399">0.0174</span> <span style="color: #993399">5000</span> <span style="color: #993399">87</span> <span style="color: #993399">4913</span> <span style="color: #990000">:</span> <span style="color: #993399">2113</span> <span style="color: #993399">2113</span>     <span style="color: #993399">1919</span> <span style="color: #993399">1908</span>       <span style="color: #993399">386</span> <span style="color: #993399">367</span> <span style="color: #990000">:</span> <span style="color: #993399">57</span> <span style="color: #993399">582</span> <span style="color: #993399">525</span>
mismatched det<span style="color: #990000">:</span> <span style="color: #993399">0</span> obs<span style="color: #990000">:</span> <span style="color: #993399">87</span></tt></pre></div></div>
<div class="paragraph"><p>The last line in the output indicates that all detector events are
recovered correctly (as expected), but there are some logical errors,
in agreement with the <code>fail_fraction</code> and <code>success_cnt</code> reported by
the program.</p></div>
<div class="paragraph"><p>A similar run with <code>mode=1.12 lerr=-1</code> (serial-V BP without OSD) gave
output with the last three lines</p></div>
<div class="listingblock">
<div class="title">example X4</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>src/vecdec <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">1.12</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">7</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span>-<span style="color: #993399">1</span> <span style="color: #009900">fdet</span><span style="color: #990000">=</span>tmp_det<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">fobs</span><span style="color: #990000">=</span>tmp_obs<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #990000">\</span>
           <span style="color: #009900">fdem</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples/surf_d3<span style="color: #990000">.</span>dem <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">2500</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10</span> <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">5000</span> <span style="color: #990000">\</span>
           <span style="color: #009900">perr</span><span style="color: #990000">=</span>tmp_E<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">pdet</span><span style="color: #990000">=</span>tmp_D<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">pobs</span><span style="color: #990000">=</span>tmp_L<span style="color: #990000">.</span><span style="color: #993399">01</span>
<span style="color: #009900">det_mism</span><span style="color: #990000">=</span>`paste tmp_D<span style="color: #990000">.</span><span style="color: #993399">01</span> tmp_det<span style="color: #990000">.</span><span style="color: #993399">01</span> -d<span style="color: #FF0000">" "</span><span style="color: #990000">|</span> grep -E -c -v <span style="color: #FF0000">'^([01]+) </span><span style="color: #CC33CC">\1</span><span style="color: #FF0000">$'</span>`
<span style="color: #009900">obs_mism</span><span style="color: #990000">=</span>`paste tmp_L<span style="color: #990000">.</span><span style="color: #993399">01</span> tmp_obs<span style="color: #990000">.</span><span style="color: #993399">01</span> -d<span style="color: #FF0000">" "</span><span style="color: #990000">|</span> grep -E -c -v <span style="color: #FF0000">'^([01]+) </span><span style="color: #CC33CC">\1</span><span style="color: #FF0000">$'</span>`
echo mismatched det<span style="color: #990000">:</span> <span style="color: #009900">$det_mism</span> obs<span style="color: #990000">:</span> <span style="color: #009900">$obs_mism</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># P_FAIL N_TOT FAIL S_TOT : C_TRIVIAL S_TRIVIAL   C_LOW S_LOW  C_CLUS S_CLUS : FAIL_BP N_BP   C_BP C_BP_AVG C_BP_TOT   S_BP S_OSD</span></span>
     <span style="color: #993399">0.0472</span> <span style="color: #993399">5000</span> <span style="color: #993399">236</span> <span style="color: #993399">4764</span> <span style="color: #990000">:</span> <span style="color: #993399">2113</span> <span style="color: #993399">2113</span>    <span style="color: #993399">1919</span> <span style="color: #993399">1908</span>       <span style="color: #993399">386</span> <span style="color: #993399">367</span> <span style="color: #990000">:</span> <span style="color: #993399">206</span> <span style="color: #993399">582</span>       <span style="color: #993399">382</span> <span style="color: #993399">11</span> <span style="color: #993399">393</span>      <span style="color: #993399">376</span>  <span style="color: #993399">0</span>
mismatched det<span style="color: #990000">:</span> <span style="color: #993399">189</span> obs<span style="color: #990000">:</span> <span style="color: #993399">117</span></tt></pre></div></div>
<div class="paragraph"><p>The <code>mismatched det</code> value in the last line is in agreement with the
difference <code>N_BP - C_BP_TOT</code>.  However, the number of times the
observable was incorrect does not match the number of <code>FAIL`s reported by `vecdec</code>.  To
reproduce the total number of logical errors, both the <code>det</code> and <code>obs</code>
have to be compared at once, e.g., by running</p></div>
<div class="listingblock">
<div class="title">example X5</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #009900">num</span><span style="color: #990000">=</span><span style="color: #993399">5000</span>
src/vecdec <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">1.12</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">7</span> <span style="color: #009900">fdet</span><span style="color: #990000">=</span>tmp_det<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">fobs</span><span style="color: #990000">=</span>tmp_obs<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #990000">\</span>
           <span style="color: #009900">fdem</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples/surf_d3<span style="color: #990000">.</span>dem <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #009900">$num</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span>-<span style="color: #993399">1</span> <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #009900">$num</span> <span style="color: #990000">\</span>
           <span style="color: #009900">perr</span><span style="color: #990000">=</span>tmp_E<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">pdet</span><span style="color: #990000">=</span>tmp_D<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">pobs</span><span style="color: #990000">=</span>tmp_L<span style="color: #990000">.</span><span style="color: #993399">01</span></tt></pre></div></div>
<div class="paragraph"><p>paste -d: tmp_det.01 tmp_obs.01 | head -$num &gt; tmp1.01
paste -d: tmp_D.01 tmp_L.01 &gt; tmp2.01
echo failed: <code>paste tmp1.01 tmp2.01 -d" "| grep -E -v -c '^([01]+:[01]+) \1$'</code></p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>which returns the number of failed decoding <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> agreement with `FAIL`
reported by `vecdec`<span style="color: #990000">.</span></tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_syndrome_vector_manipulation">Syndrome vector manipulation</h4>
<div class="paragraph"><p>In some cases, we may need to modify the syndrome vectors read from a
file.  Input parameters <code>fer0</code> and <code>finA</code> are used to this extent.
Namely, the detector events <code>s</code> read from a file specified with the
parameter <code>fdet</code> are modified according to <code>s -&gt; s + A*e0</code>, where
binary matrix <code>A</code> and <code>01</code> vectors <code>e0</code> are read from files specified
as arguments of <code>finA=...</code> and <code>fer0=...</code>.</p></div>
<div class="paragraph"><p>In particular, if we use BP w/o OSD for decoding, and save generated
detector events and the predicted errors into files <code>dets.01</code> and
<code>bperr.01</code> respectively, we can use this feature to verify the syndrome values:</p></div>
<div class="listingblock">
<div class="title">example X6</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #009900">H</span><span style="color: #990000">=.</span>/examples<span style="color: #990000">/</span><span style="color: #993399">96.3</span><span style="color: #990000">.</span><span style="color: #993399">963</span><span style="color: #990000">.</span>alist
<span style="font-style: italic"><span style="color: #9A1900"># write out predicted errors and dets</span></span>
src/vecdec <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">1.12</span> <span style="color: #009900">finH</span><span style="color: #990000">=</span> <span style="color: #009900">$H</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">13</span> <span style="color: #990000">\</span>
           <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">40</span> <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #993399">0.05</span> <span style="color: #009900">gdet</span><span style="color: #990000">=</span>dets<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">perr</span><span style="color: #990000">=</span>bperr<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #990000">|</span> tail -<span style="color: #993399">2</span>
<span style="font-style: italic"><span style="color: #9A1900"># write out updated DET events</span></span>
src/vecdec <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">finH</span><span style="color: #990000">=</span> <span style="color: #009900">$H</span> <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">uW</span><span style="color: #990000">=</span>-<span style="color: #993399">1</span> <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #993399">0.05</span> <span style="color: #990000">\</span>
           <span style="color: #009900">fdet</span><span style="color: #990000">=</span>dets<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">fer0</span><span style="color: #990000">=</span>bperr<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">finA</span><span style="color: #990000">=</span><span style="color: #009900">$H</span> <span style="color: #009900">gdet</span><span style="color: #990000">=</span>yyy<span style="color: #990000">.</span><span style="color: #993399">01</span>
echo <span style="color: #FF0000">"# number of convergence failures:"</span> `grep -c <span style="color: #993399">1</span> yyy<span style="color: #990000">.</span><span style="color: #993399">01</span>`</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># P_FAIL N_TOT FAIL S_TOT : C_TRIVIAL S_TRIVIAL   C_LOW S_LOW  C_CLUS S_CLUS : FAIL_BP N_BP   C_BP C_BP_AVG C_BP_TOT   S_BP S_OSD</span></span>
      <span style="color: #993399">0.094</span> <span style="color: #993399">1000</span> <span style="color: #993399">94</span> <span style="color: #993399">906</span> <span style="color: #990000">:</span> <span style="color: #993399">3</span> <span style="color: #993399">3</span>    <span style="color: #993399">31</span> <span style="color: #993399">31</span>   <span style="color: #993399">11</span> <span style="color: #993399">11</span> <span style="color: #990000">:</span> <span style="color: #993399">94</span> <span style="color: #993399">955</span>          <span style="color: #993399">513</span> <span style="color: #993399">352</span> <span style="color: #993399">865</span>     <span style="color: #993399">861</span>  <span style="color: #993399">0</span>
<span style="font-style: italic"><span style="color: #9A1900"># Could not process Matrix Market banner; try 'alist' format</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read alist file ./examples/96.3.963.alist (transposed): rows=48 cols=96 nz=288</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># initializing seed=87002779710 from time(NULL)+1000000ul*getpid()+0</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># Could not process Matrix Market banner; try 'alist' format</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read alist file ./examples/96.3.963.alist (transposed): rows=48 cols=96 nz=288</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># mode=0, running vecdec RIS decoder : use DET file</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># modifying DET events +A*e0 with A ./examples/96.3.963.alist and e0 bperr.01 files</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># mode=0 submode=0: use RIS decoder</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># RIS decoder parameters: steps=0 swait=0 lerr=-1</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># ntot=1000 nvec=1000 nfail=0</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># uW=-1, will not use cluster-based pre-decoder</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># starting round 1 of 1</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read 1000 det events</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># updated 1000 det += A*e0 events</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># number of convergence failures: 90</span></span></tt></pre></div></div>
<div class="paragraph"><p>Here each line in the file <code>yyy.01</code> is the combination <code>s+A*e0</code>, with the
lines <code>s</code> and <code>e0</code> read from the files <code>dets.01</code> and <code>bperr.01</code>,
respectively.  The convergence failures is in agreement with
the number of non-zero syndrome vectors in the file <code>yyy.01</code></p></div>
<div class="paragraph"><p>The input parameters <code>finA</code>, <code>fer0</code>, and <code>fdet</code> can be used for decoding
(in <code>mode=0</code> and <code>mode=1</code>); they must be specified at the same time.
The only effect of <code>fer0</code> and <code>finA</code> is that the syndrome vectors are modified;
otherwise, the decoding can proceed as usual.</p></div>
<div class="paragraph"><p>In addition <code>01</code> files can be easily split using the <code>cut</code> command.
For example, to select columns <code>3</code> to <code>5</code> (inclusive, numbers starting
with <code>1</code>) of file <code>dets.01</code> created earlier, we can use (result is
sent to <code>stdout</code>).</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cut -c <span style="color: #993399">3</span>-<span style="color: #993399">5</span> dets<span style="color: #990000">.</span><span style="color: #993399">01</span></tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_just_in_time_decoding">Just-in-time decoding</h4>
<div class="paragraph"><p>To be useful in scalable quantum computation, quantum error correction
would be run over millions of measurement rounds.  In such a case, we
do not expect to be able to decode the entire syndrome vector,
piecewise decoding would be necessary.  This example shows how to do
it with <code>vecdec</code> and a small included program <code>mtx_sub</code> for splitting
<code>mtx</code> matrices into pieces.  In this example, the <code>5</code>-round detector
error model <code>surf_d5.dem</code> will be used.  The circuit generates <code>12</code>
detector events in the 1st round, <code>24</code> in each of the 4 subsequent
rounds, and <code>12</code> in the final round.  It was constructed with <code>Stim</code>
using the following script :</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #009900">stim</span><span style="color: #990000">=..</span>/Stim/out/stim
<span style="color: #009900">dist</span><span style="color: #990000">=</span><span style="color: #993399">5</span>
<span style="color: #009900">p1</span><span style="color: #990000">=</span><span style="color: #993399">0.003</span>
<span style="font-style: italic"><span style="color: #9A1900"># construct `stim` file</span></span>
<span style="color: #009900">$stim</span> gen --code surface_code --task rotated_memory_x <span style="color: #990000">\</span>
      --distance <span style="color: #009900">$dist</span> --rounds <span style="color: #009900">$dist</span> <span style="color: #990000">\</span>
      --after_clifford_depolarization <span style="color: #009900">$p1</span> <span style="color: #990000">\</span>
      --after_reset_flip_probability <span style="color: #009900">$p1</span> <span style="color: #990000">\</span>
      --before_round_data_depolarization <span style="color: #009900">$p1</span> <span style="color: #990000">\</span>
      --before_measure_flip_probability <span style="color: #009900">$p1</span> <span style="color: #990000">\</span>
      <span style="color: #990000">&gt;</span> examples/surf_d<span style="color: #009900">$dist</span><span style="color: #990000">.</span>stim
<span style="font-style: italic"><span style="color: #9A1900"># generate the corresponding DEM file</span></span>
<span style="color: #009900">$stim</span> analyze_errors --in examples/surf_d<span style="color: #009900">${dist}</span><span style="color: #990000">.</span>stim <span style="color: #990000">&gt;</span> examples/surf_d<span style="color: #009900">${dist}</span><span style="color: #990000">.</span>dem</tt></pre></div></div>
<div class="paragraph"><p>Namely, the same samples will be decoded firstly in two steps, using two
overlapping blocks, and secondly all at once (for comparison).</p></div>
<div class="paragraph"><p>First, extract matrices and the error probability vector from the <code>DEM</code> file</p></div>
<div class="listingblock">
<div class="title">example X7</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#</span></span>
src/vecdec <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">3.28</span> <span style="color: #009900">fdem</span><span style="color: #990000">=</span>examples/surf_d5<span style="color: #990000">.</span>dem <span style="color: #009900">fout</span><span style="color: #990000">=</span>big
---
<span style="font-style: italic"><span style="color: #9A1900"># opening DEM file examples/surf_d5.dem</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read DEM examples/surf_d5.dem: rows_H=120 rows_L=1 cols=1679; nz_H=5008 nz_L=140</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># Output H=Hx L=Lx matrices and probabilities vector</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># writing H=Hx matrix [ 120 x 1679 ] to         bigH.mmx</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># writing L=Lx matrix [ 1 x 1679 ] to   bigL.mmx</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># writing P vector [ 1679 ] to          bigP.mmx</span></span></tt></pre></div></div>
<div class="paragraph"><p>Second, use <code>mtx_sub</code> to calculate the column boundaries in different row blocks of <code>H</code></p></div>
<div class="listingblock">
<div class="title">example X8</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># row blocks: 12 36 60 84 108 120</span></span>
src/mtx_sub <span style="color: #009900">fin</span><span style="color: #990000">=</span>bigH<span style="color: #990000">.</span>mmx <span style="color: #009900">rows</span><span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">11</span> <span style="color: #009900">rows</span><span style="color: #990000">=</span><span style="color: #993399">12</span><span style="color: #990000">,</span><span style="color: #993399">35</span> <span style="color: #009900">rows</span><span style="color: #990000">=</span><span style="color: #993399">36</span><span style="color: #990000">,</span><span style="color: #993399">59</span> <span style="color: #009900">rows</span><span style="color: #990000">=</span><span style="color: #993399">60</span><span style="color: #990000">,</span><span style="color: #993399">83</span> <span style="color: #009900">rows</span><span style="color: #990000">=</span><span style="color: #993399">84</span><span style="color: #990000">,</span><span style="color: #993399">107</span> <span style="color: #009900">rows</span><span style="color: #990000">=</span><span style="color: #993399">108</span><span style="color: #990000">,</span><span style="color: #993399">119</span></tt></pre></div></div>
<div class="paragraph"><p>---
# matrix dimensions 120 by 1679
# row range [0 .. 11], first and last non-zero columns:
0 147
# row range [12 .. 35], first and last non-zero columns:
1 585
# row range [36 .. 59], first and last non-zero columns:
150 993
# row range [60 .. 83], first and last non-zero columns:
588 1401
# row range [84 .. 107], first and last non-zero columns:
996 1657
# row range [108 .. 119], first and last non-zero columns:
1404 1678</p></div>
<div class="paragraph"><p>For this simple example, the first block will include rows from <code>0</code> to
<code>83</code>, and columns from <code>0</code> to <code>a=1401</code>, and the second block rows from
<code>[36..119]</code> and all columns, with error vector in columns <code>[0..585]</code>
fixed.  This implies the matrix decomposition (using matlab notations,
except starting with <code>0</code>)</p></div>
<div class="literalblock">
<div class="content">
<pre><code>A1=H[  :83 ,    :1401]
B2=H[36:119,    :585]
A2=H[36:119, 586: ]</code></pre>
</div></div>
<div class="paragraph"><p>This also requires the decomposition of the probability vector</p></div>
<div class="literalblock">
<div class="content">
<pre><code>P1=P[   :1401] # use with `A1`
P2=H[586:    ] # use with `A2`</code></pre>
</div></div>
<div class="paragraph"><p>Given the syndrome vector <code>s</code>, in the first step we solve the equation
<code>A1*e1=s[0:83]</code>, and in the second step the equation <code>A2*e2 =
s[36:119] + B2 * e1[0:585]</code>, with the output error vector a
concatenation <code>(e1[0:585], e2)</code>.  This is implemented as the shell
script</p></div>
<div class="listingblock">
<div class="title">example X9</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #009900">num</span><span style="color: #990000">=</span><span style="color: #993399">1000</span>
<span style="font-style: italic"><span style="color: #9A1900"># prepare the matrices end probability vectors (extension '.mtx' added)</span></span>
src/mtx_sub <span style="color: #009900">fin</span><span style="color: #990000">=</span>bigH<span style="color: #990000">.</span>mmx <span style="color: #009900">maxR</span><span style="color: #990000">=</span><span style="color: #993399">83</span> <span style="color: #009900">maxC</span><span style="color: #990000">=</span><span style="color: #993399">1401</span> <span style="color: #009900">out</span><span style="color: #990000">=</span>tryA1
src/mtx_sub <span style="color: #009900">fin</span><span style="color: #990000">=</span>bigH<span style="color: #990000">.</span>mmx <span style="color: #009900">minR</span><span style="color: #990000">=</span><span style="color: #993399">36</span> <span style="color: #009900">maxC</span><span style="color: #990000">=</span><span style="color: #993399">585</span>  <span style="color: #009900">out</span><span style="color: #990000">=</span>tryB2
src/mtx_sub <span style="color: #009900">fin</span><span style="color: #990000">=</span>bigH<span style="color: #990000">.</span>mmx <span style="color: #009900">minR</span><span style="color: #990000">=</span><span style="color: #993399">36</span> <span style="color: #009900">minC</span><span style="color: #990000">=</span><span style="color: #993399">586</span>  <span style="color: #009900">out</span><span style="color: #990000">=</span>tryA2
<span style="font-style: italic"><span style="color: #9A1900"># split the probability vector (this is a hack)</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># P1</span></span>
grep <span style="color: #990000">%%</span> bigP<span style="color: #990000">.</span>mmx <span style="color: #990000">&gt;</span> tryP1<span style="color: #990000">.</span>mmx <span style="font-style: italic"><span style="color: #9A1900"># Matrix Market header</span></span>
echo <span style="color: #993399">1</span> <span style="color: #993399">1402</span> <span style="color: #990000">&gt;&gt;</span> tryP1<span style="color: #990000">.</span>mmx
tail <span style="color: #990000">+</span><span style="color: #993399">4</span> bigP<span style="color: #990000">.</span>mmx <span style="color: #990000">|</span> head -<span style="color: #993399">1402</span> <span style="color: #990000">&gt;&gt;</span> tryP1<span style="color: #990000">.</span>mmx
<span style="font-style: italic"><span style="color: #9A1900"># P2</span></span>
grep <span style="color: #990000">%%</span> bigP<span style="color: #990000">.</span>mmx <span style="color: #990000">&gt;</span> tryP2<span style="color: #990000">.</span>mmx <span style="font-style: italic"><span style="color: #9A1900"># Matrix Market header</span></span>
echo <span style="color: #993399">1</span> <span style="color: #009900">$((1679-586))</span> <span style="color: #990000">&gt;&gt;</span> tryP2<span style="color: #990000">.</span>mmx
tail -<span style="color: #009900">$((1679-586))</span> bigP<span style="color: #990000">.</span>mmx <span style="color: #990000">&gt;&gt;</span> tryP2<span style="color: #990000">.</span>mmx
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># generate the `det` and `obs` events (big file)</span></span>
src/vecdec <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">gdet</span><span style="color: #990000">=</span>big_det<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">gobs</span><span style="color: #990000">=</span>big_obs<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">finH</span><span style="color: #990000">=</span>bigH<span style="color: #990000">.</span>mmx <span style="color: #009900">finP</span><span style="color: #990000">=</span>bigP<span style="color: #990000">.</span>mmx <span style="color: #009900">finL</span><span style="color: #990000">=</span>bigL<span style="color: #990000">.</span>mmx <span style="color: #990000">\</span>
           <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">uW</span><span style="color: #990000">=</span>-<span style="color: #993399">1</span> <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #009900">$num</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #009900">$num</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">7</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># split `det` events</span></span>
cut -c <span style="color: #993399">1</span>-<span style="color: #993399">84</span> big_det<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #990000">&gt;</span> try_D1<span style="color: #990000">.</span><span style="color: #993399">01</span>
cut -c <span style="color: #993399">37</span>-<span style="color: #993399">120</span> big_det<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #990000">&gt;</span> try_D2<span style="color: #990000">.</span><span style="color: #993399">01</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># first-step decoding</span></span>
src/vecdec <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #990000">\</span>
           <span style="color: #009900">fdet</span><span style="color: #990000">=</span>try_D1<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">finH</span><span style="color: #990000">=</span>tryA1<span style="color: #990000">.</span>mtx <span style="color: #009900">finP</span><span style="color: #990000">=</span>tryP1<span style="color: #990000">.</span>mmx  <span style="color: #990000">\</span>
           <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #009900">$num</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #009900">$num</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">7</span> <span style="color: #009900">perr</span><span style="color: #990000">=</span>try_E1<span style="color: #990000">.</span><span style="color: #993399">01</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># cut out the first 586 cols of e1</span></span>
cut -c <span style="color: #993399">1</span>-<span style="color: #993399">586</span> try_E1<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #990000">&gt;</span> try_E1x<span style="color: #990000">.</span><span style="color: #993399">01</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># second step decoding</span></span>
src/vecdec <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">fdet</span><span style="color: #990000">=</span>try_D2<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">finH</span><span style="color: #990000">=</span>tryA2<span style="color: #990000">.</span>mtx <span style="color: #009900">finP</span><span style="color: #990000">=</span>tryP2<span style="color: #990000">.</span>mmx  <span style="color: #990000">\</span>
           <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">1000</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #009900">$num</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #009900">$num</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">7</span> <span style="color: #009900">perr</span><span style="color: #990000">=</span>try_E2<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #990000">\</span>
           <span style="color: #009900">fer0</span><span style="color: #990000">=</span>try_E1x<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">finA</span><span style="color: #990000">=</span>tryB2<span style="color: #990000">.</span>mtx
<span style="font-style: italic"><span style="color: #9A1900"># create the combined error vector</span></span>
paste try_E1x<span style="color: #990000">.</span><span style="color: #993399">01</span> try_E2<span style="color: #990000">.</span><span style="color: #993399">01</span> -d <span style="color: #FF0000">""</span> <span style="color: #990000">&gt;</span> out_E<span style="color: #990000">.</span><span style="color: #993399">01</span>
<span style="font-style: italic"><span style="color: #9A1900"># create the updated det file for syndrome verification (should be all-zero)</span></span>
src/vecdec <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">finH</span><span style="color: #990000">=</span>bigH<span style="color: #990000">.</span>mmx <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #009900">$num</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #009900">$num</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">uW</span><span style="color: #990000">=</span>-<span style="color: #993399">1</span> <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #993399">0.05</span> <span style="color: #990000">\</span>
           <span style="color: #009900">fdet</span><span style="color: #990000">=</span>big_det<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">fer0</span><span style="color: #990000">=</span>out_E<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">finA</span><span style="color: #990000">=</span>bigH<span style="color: #990000">.</span>mmx <span style="color: #009900">gdet</span><span style="color: #990000">=</span>yyy<span style="color: #990000">.</span><span style="color: #993399">01</span>
<span style="font-style: italic"><span style="color: #9A1900"># create the obs vector</span></span>
src/vecdec <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">finH</span><span style="color: #990000">=</span>bigH<span style="color: #990000">.</span>mmx <span style="color: #009900">finL</span><span style="color: #990000">=</span>bigL<span style="color: #990000">.</span>mmx <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #009900">$num</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #009900">$num</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">uW</span><span style="color: #990000">=</span>-<span style="color: #993399">1</span> <span style="color: #009900">useP</span><span style="color: #990000">=</span><span style="color: #993399">0.05</span> <span style="color: #990000">\</span>
           <span style="color: #009900">ferr</span><span style="color: #990000">=</span>out_E<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">gobs</span><span style="color: #990000">=</span>xxx<span style="color: #990000">.</span><span style="color: #993399">01</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># output success count</span></span>
paste -d<span style="color: #990000">:</span> big_det<span style="color: #990000">.</span><span style="color: #993399">01</span> big_obs<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #990000">|</span> head -<span style="color: #009900">$num</span> <span style="color: #990000">&gt;</span> tmp1<span style="color: #990000">.</span><span style="color: #993399">01</span>
paste -d<span style="color: #990000">:</span> yyy<span style="color: #990000">.</span><span style="color: #993399">01</span> xxx<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #990000">&gt;</span> tmp2<span style="color: #990000">.</span><span style="color: #993399">01</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
echo two-step decoding failed<span style="color: #990000">:</span> det `grep -c <span style="color: #993399">1</span> yyy<span style="color: #990000">.</span><span style="color: #993399">01</span>` <span style="color: #990000">\</span>
     obs `paste big_obs<span style="color: #990000">.</span><span style="color: #993399">01</span> xxx<span style="color: #990000">.</span><span style="color: #993399">01</span> -d<span style="color: #FF0000">" "</span><span style="color: #990000">|</span> grep -E -v -c <span style="color: #FF0000">'^([01]+) </span><span style="color: #CC33CC">\1</span><span style="color: #FF0000">$'</span>` out of <span style="color: #009900">$num</span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># compare with full-block decoding (use more steps here since matrix is bigger)</span></span>
src/vecdec <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10000</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">uW</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #990000">\</span>
           <span style="color: #009900">fdet</span><span style="color: #990000">=</span>big_det<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">fobs</span><span style="color: #990000">=</span>big_obs<span style="color: #990000">.</span><span style="color: #993399">01</span> <span style="color: #009900">fdem</span><span style="color: #990000">=</span>examples/surf_d5<span style="color: #990000">.</span>dem <span style="color: #990000">\</span>
           <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #009900">$num</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #009900">$num</span> <span style="color: #009900">seed</span><span style="color: #990000">=</span><span style="color: #993399">7</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># matrix dimensions 120 by 1679</span></span>
creating submatrix rows <span style="color: #993399">0</span> to <span style="color: #993399">83</span><span style="color: #990000">,</span> cols <span style="color: #993399">0</span> to <span style="color: #993399">1401</span> <span style="color: #990000">(</span>inclusive<span style="color: #990000">)</span>
submatrix of bigH<span style="color: #990000">.</span>mmx <span style="color: #009900">minR</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">maxR</span><span style="color: #990000">=</span><span style="color: #993399">83</span> <span style="color: #009900">minC</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">maxC</span><span style="color: #990000">=</span><span style="color: #993399">1401</span>
<span style="font-style: italic"><span style="color: #9A1900"># matrix dimensions 120 by 1679</span></span>
creating submatrix rows <span style="color: #993399">36</span> to <span style="color: #993399">119</span><span style="color: #990000">,</span> cols <span style="color: #993399">0</span> to <span style="color: #993399">585</span> <span style="color: #990000">(</span>inclusive<span style="color: #990000">)</span>
submatrix of bigH<span style="color: #990000">.</span>mmx <span style="color: #009900">minR</span><span style="color: #990000">=</span><span style="color: #993399">36</span> <span style="color: #009900">maxR</span><span style="color: #990000">=</span><span style="color: #993399">119</span> <span style="color: #009900">minC</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">maxC</span><span style="color: #990000">=</span><span style="color: #993399">585</span>
<span style="font-style: italic"><span style="color: #9A1900"># matrix dimensions 120 by 1679</span></span>
creating submatrix rows <span style="color: #993399">36</span> to <span style="color: #993399">119</span><span style="color: #990000">,</span> cols <span style="color: #993399">586</span> to <span style="color: #993399">1678</span> <span style="color: #990000">(</span>inclusive<span style="color: #990000">)</span>
submatrix of bigH<span style="color: #990000">.</span>mmx <span style="color: #009900">minR</span><span style="color: #990000">=</span><span style="color: #993399">36</span> <span style="color: #009900">maxR</span><span style="color: #990000">=</span><span style="color: #993399">119</span> <span style="color: #009900">minC</span><span style="color: #990000">=</span><span style="color: #993399">586</span> <span style="color: #009900">maxC</span><span style="color: #990000">=</span><span style="color: #993399">1678</span>
two-step decoding failed<span style="color: #990000">:</span> det <span style="color: #993399">0</span> obs <span style="color: #993399">4</span> out of <span style="color: #993399">1000</span>
<span style="font-style: italic"><span style="color: #9A1900"># opening DEM file examples/surf_d5.dem</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read DEM examples/surf_d5.dem: rows_H=120 rows_L=1 cols=1679; nz_H=5008 nz_L=140</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># mode=0, running vecdec RIS decoder : use DET and OBS files</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># mode=0 submode=0: use RIS decoder</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># RIS decoder parameters: steps=10000 swait=0 lerr=1</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># ntot=1000 nvec=1000 nfail=0</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># uW=2, adding errors of weight up to 2 to syndrome hash</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># uX=0, will not use partially matched errors for pre-decoding</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># stored 1410360 errors / 1316533 distinct syndrome vectors in hash</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># starting round 1 of 1</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># read 1000 det/obs pairs</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># P_FAIL N_TOT FAIL S_TOT : C_TRIVIAL S_TRIVIAL   C_LOW S_LOW  C_CLUS S_CLUS : FAIL_RIS N_RIS S_RIS</span></span>
      <span style="color: #993399">0.004</span> <span style="color: #993399">1000</span> <span style="color: #993399">4</span> <span style="color: #993399">996</span> <span style="color: #990000">:</span> <span style="color: #993399">83</span> <span style="color: #993399">83</span>   <span style="color: #993399">445</span> <span style="color: #993399">445</span>         <span style="color: #993399">340</span> <span style="color: #993399">339</span> <span style="color: #990000">:</span> <span style="color: #993399">3</span> <span style="color: #993399">132</span> <span style="color: #993399">129</span></tt></pre></div></div>
<div class="paragraph"><p>In this particular case, we have the same number of decoding failures.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_simulate_quantum_clifford_circuit_given_a_detector_error_model">Simulate quantum Clifford circuit (given a detector error model)</h3>
<div class="paragraph"><p>In this particular example, detector error model (DEM) file is
generated by <code>Stim</code> for a specific quantum circuit.  Namely, a $d=5$
surface code with $5$ rounds of measurements and a standard circuit
error model with the same probability <code>p=0.005</code> of four common error types:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #990000">===</span>
<span style="color: #009900">vecdec</span><span style="color: #990000">=.</span>/src/vecdec
<span style="color: #009900">stim</span><span style="color: #990000">=..</span>/Stim/out/stim <span style="font-style: italic"><span style="color: #9A1900"># location of `stim` command-line binary</span></span>
<span style="color: #009900">d</span><span style="color: #990000">=</span><span style="color: #993399">5</span>                      <span style="font-style: italic"><span style="color: #9A1900"># code distance (and number of rounds)</span></span>
<span style="color: #009900">p</span><span style="color: #990000">=</span><span style="color: #993399">0.005</span>                  <span style="font-style: italic"><span style="color: #9A1900"># error probability to use</span></span>
<span style="color: #009900">fnam</span><span style="color: #990000">=</span>sd5                 <span style="font-style: italic"><span style="color: #9A1900"># base file name to use for `stim` files</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># use `Stim` to create the actual circuit</span></span>
<span style="color: #009900">$stim</span> gen --code surface_code --task rotated_memory_x <span style="color: #990000">\</span>
          --distance <span style="color: #009900">$d</span> --rounds <span style="color: #009900">$d</span> <span style="color: #990000">\</span>
          --after_clifford_depolarization <span style="color: #009900">$p</span> <span style="color: #990000">\</span>
          --after_reset_flip_probability <span style="color: #009900">$p</span> <span style="color: #990000">\</span>
          --before_round_data_depolarization <span style="color: #009900">$p</span> <span style="color: #990000">\</span>
          --before_measure_flip_probability <span style="color: #009900">$p</span> <span style="color: #990000">\</span>
          <span style="color: #990000">&gt;</span> <span style="color: #009900">$fnam</span><span style="color: #990000">.</span>stim
<span style="font-style: italic"><span style="color: #9A1900"># use `Stim` to create the DEM file</span></span>
<span style="color: #009900">$stim</span> analyze_errors --in <span style="color: #009900">$fnam</span><span style="color: #990000">.</span>stim <span style="color: #990000">&gt;</span> <span style="color: #009900">$fnam</span><span style="color: #990000">.</span>dem
<span style="font-style: italic"><span style="color: #9A1900"># use `vecdec` to generate errors internally and do the actual decoding</span></span>
<span style="color: #009900">$vecdec</span> <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">fdem</span><span style="color: #990000">=</span><span style="color: #009900">$fnam</span><span style="color: #990000">.</span>dem <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">500</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #990000">\</span>
          <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">10240</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">1024</span> <span style="color: #009900">nfail</span><span style="color: #990000">=</span><span style="color: #993399">100</span>
<span style="color: #990000">===</span></tt></pre></div></div>
<div class="paragraph"><p>This gives BER of <code>0.0581055</code> (<code>119</code> out of  <code>2048</code>).  Note that the
DEM file, in effect, specifies matrices <code>H=Hx</code>, <code>L=Lx</code>, and the error
probabilities in different variable nodes.  In this particular case,
the code has parameters <code>[[1679,1,5]]</code>.  The number of RIS decoding
<code>steps=500</code> is too small for this long a code.</p></div>
<div class="paragraph"><p>The same result can be also achieved by specifying these parameters in
different files: <code>finH=$H finL=$L finP=$P</code>, where <code>$H</code>, <code>$L</code> and <code>$P</code>,
respectively, are names of the files with the two matrices and the
error probability vector.  To generate these files from a DEM file,
use <code>vecdec</code> with <code>mode=3</code>:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #990000">===</span>
<span style="color: #009900">$vecdec</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">3.28</span> <span style="color: #009900">fdem</span><span style="color: #990000">=</span>sd5<span style="color: #990000">.</span>dem <span style="color: #009900">fout</span><span style="color: #990000">=</span>tmp
<span style="color: #990000">===</span></tt></pre></div></div>
<div class="paragraph"><p>This creates the files <code>tmpH.mmx</code>, <code>tmpL.mmx</code>, and <code>tmpP.mmx</code> with
matrices <code>H</code> and <code>L</code> and the probability vector <code>P</code> extracted from the
DEM file.  The submode bitmap <code>28=4+8+16</code> specifies the matrices to
generate, and <code>fout=tmp</code> gives the beginning of the file names to
create.  Similarly, <code>mode=3.1</code> can be used to create the dual
generator matrix <code>G=Hz</code> (you may need to provide a file with the
properly generated codewords), and <code>mode=3.2</code> to create the logical
generator matrix <code>K=Lz</code> (use <code>mode=3.3</code> to generate both <code>G</code> and <code>K</code>
matrices, provide the <code>G</code> matrix on the command line using <code>finG=...</code>
argument, or provide the list of codewords using <code>finC=...</code>
argument).</p></div>
<div class="paragraph"><p>The command line to use these files (in this case for BP decoding):</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #990000">===</span>
<span style="color: #009900">$vecdec</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">1.14</span> <span style="color: #009900">finH</span><span style="color: #990000">=</span>tmpH<span style="color: #990000">.</span>mmx <span style="color: #009900">finL</span><span style="color: #990000">=</span>tmpL<span style="color: #990000">.</span>mmx <span style="color: #009900">finP</span><span style="color: #990000">=</span>tmpP<span style="color: #990000">.</span>mmx <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">50</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #990000">\</span>
          <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">10240</span> <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">1024</span> <span style="color: #009900">nfail</span><span style="color: #990000">=</span><span style="color: #993399">100</span>
<span style="color: #990000">===</span></tt></pre></div></div>
<div class="paragraph"><p>It gives BER of <code>0.0103306</code> (<code>100</code> out of <code>9680</code>), substantially
better than the RIS decoding.</p></div>
<div class="ulist"><ul>
<li>
<p>
Use <code>vecdec</code> with detector and observable events generated by <code>Stim</code>:
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #990000">===</span>
<span style="color: #009900">stim</span><span style="color: #990000">=..</span>/Stim/out/stim
<span style="color: #009900">fnam</span><span style="color: #990000">=</span>sd5
<span style="color: #009900">$stim</span> sample_dem --shots <span style="color: #993399">10240</span> --in <span style="color: #009900">$fnam</span><span style="color: #990000">.</span>dem <span style="color: #990000">\</span>
        --out <span style="color: #009900">$fnam</span><span style="color: #990000">.</span>det --out_format <span style="color: #993399">01</span> <span style="color: #990000">\</span>
        --obs_out <span style="color: #009900">$fnam</span><span style="color: #990000">.</span>obs --obs_out_format <span style="color: #993399">01</span>
<span style="color: #009900">$vecdec</span> <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">1.14</span> <span style="color: #009900">fdem</span><span style="color: #990000">=</span><span style="color: #009900">$fnam</span><span style="color: #990000">.</span>dem <span style="color: #009900">fdet</span><span style="color: #990000">=</span><span style="color: #009900">$fnam</span><span style="color: #990000">.</span>det <span style="color: #009900">fobs</span><span style="color: #990000">=</span><span style="color: #009900">$fnam</span><span style="color: #990000">.</span>obs <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">50</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #990000">\</span>
           <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">1024</span> <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">10240</span>
<span style="color: #990000">===</span></tt></pre></div></div>
<div class="paragraph"><p>Finally, to estimate the decoding
performance at small error probabilities, <code>mode=2</code> can be used:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #990000">===</span>
<span style="color: #009900">vecdec</span><span style="color: #990000">=.</span>/src/vecdec
<span style="color: #009900">$vecdec</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">2.0</span> <span style="color: #009900">fdem</span><span style="color: #990000">=</span>sd5<span style="color: #990000">.</span>dem <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">100000</span> <span style="color: #009900">dW</span><span style="color: #990000">=</span><span style="color: #993399">7</span> <span style="color: #009900">outC</span><span style="color: #990000">=</span>tmp<span style="color: #990000">.</span>nz
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">((</span><span style="color: #009900">w</span><span style="color: #990000">=</span><span style="color: #993399">5</span><span style="color: #990000">;</span> w<span style="color: #990000">&lt;=</span><span style="color: #993399">10</span><span style="color: #990000">;</span> w<span style="color: #990000">++))</span> <span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">do</span></span>
  echo <span style="color: #009900">$w</span> `<span style="color: #009900">$vecdec</span> <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">2.2</span> <span style="color: #009900">fdem</span><span style="color: #990000">=</span>sd5<span style="color: #990000">.</span>dem <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">0</span> <span style="color: #009900">maxW</span><span style="color: #990000">=</span><span style="color: #009900">$w</span> <span style="color: #009900">finC</span><span style="color: #990000">=</span>tmp<span style="color: #990000">.</span>nz`
<span style="font-weight: bold"><span style="color: #0000FF">done</span></span>
<span style="color: #990000">===</span></tt></pre></div></div>
<div class="paragraph"><p>This the output (truncated at the top)</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #990000">===</span>
<span style="font-style: italic"><span style="color: #9A1900"># min_weight N_min N_use N_tot</span></span>
<span style="color: #993399">5</span> <span style="color: #993399">13800</span> <span style="color: #993399">5471523</span> <span style="color: #993399">5471523</span>
<span style="font-style: italic"><span style="color: #9A1900"># wrote 5471523 computed codewords to file tmp.nz</span></span>
<span style="color: #993399">5</span> <span style="color: #993399">0.00258921</span> <span style="color: #993399">2.71648e-05</span> <span style="color: #993399">5</span> <span style="color: #993399">13800</span> <span style="color: #993399">13800</span> <span style="color: #993399">13800</span>
<span style="color: #993399">6</span> <span style="color: #993399">0.00880308</span> <span style="color: #993399">2.71648e-05</span> <span style="color: #993399">5</span> <span style="color: #993399">13800</span> <span style="color: #993399">175887</span> <span style="color: #993399">175887</span>
<span style="color: #993399">7</span> <span style="color: #993399">0.009567</span> <span style="color: #993399">2.71648e-05</span> <span style="color: #993399">5</span> <span style="color: #993399">13800</span> <span style="color: #993399">533481</span> <span style="color: #993399">533481</span>
<span style="color: #993399">8</span> <span style="color: #993399">0.00968002</span> <span style="color: #993399">2.71648e-05</span> <span style="color: #993399">5</span> <span style="color: #993399">13800</span> <span style="color: #993399">1090400</span> <span style="color: #993399">1090400</span>
<span style="color: #993399">9</span> <span style="color: #993399">0.00968931</span> <span style="color: #993399">2.71648e-05</span> <span style="color: #993399">5</span> <span style="color: #993399">13800</span> <span style="color: #993399">1858982</span> <span style="color: #993399">1858982</span>
<span style="color: #993399">10</span> <span style="color: #993399">0.00969025</span> <span style="color: #993399">2.71648e-05</span> <span style="color: #993399">5</span> <span style="color: #993399">13800</span> <span style="color: #993399">2845251</span> <span style="color: #993399">2845251</span>
<span style="color: #990000">===</span></tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>Clearly<span style="color: #990000">,</span> the expansion converges<span style="color: #990000">,</span> and the greedy estimate is
numerically close to the actual error rate<span style="color: #990000">.</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_use_matrix_transformations_to_simplify_the_error_model">Use matrix transformations to simplify the error model</h3>
<div class="paragraph"><p>The transformations [@Pryadko-2020] reduce the degeneracy of a quantum
code while preserving the maximum-likelihood (ML) decoding
performance.  These correspond to <strong>inverse decoration</strong> or
<strong>star-triangle</strong> (more generally, <strong>star-polygon</strong>) transformations in
the equivalent Ising models.  Namely, <strong>inverse decoration</strong> combines
two identical columns in the matrices <code>H=Hx</code> and <code>L=Lx</code> (degeneracy
vector of weight <code>2</code> removal), while <strong>star-triangle</strong> removes a
degeneracy vector of weight <code>3</code>.  More general <strong>star-polygon</strong>
transformation can remove degeneracy vectors of higher weight
(currently not implemented).</p></div>
<div class="paragraph"><p>If starting with the DEM file, first generate the corresponding <code>H=Hx</code>
matrix matrix and the probability vector <code>P</code> (here these go to files
<code>tmpH.mmx</code> and <code>tmpP.mmx</code>):</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #990000">===</span>
<span style="color: #009900">$vecdec</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">3.20</span> <span style="color: #009900">fdem</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples/surf_d3<span style="color: #990000">.</span>dem <span style="color: #009900">fout</span><span style="color: #990000">=</span>tmp
<span style="color: #990000">===</span></tt></pre></div></div>
<div class="paragraph"><p>Second, create a list of (classical)
codewords of weight <code>3</code> orthogonal to the rows of <code>H</code></p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #990000">===</span>
<span style="color: #009900">$vecdec</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #009900">finH</span><span style="color: #990000">=</span>tmpH<span style="color: #990000">.</span>mmx <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">10000</span> <span style="color: #009900">maxW</span><span style="color: #990000">=</span><span style="color: #993399">3</span> <span style="color: #009900">finP</span><span style="color: #990000">=</span> tmpP<span style="color: #990000">.</span>mmx <span style="color: #009900">outC</span><span style="color: #990000">=</span>tmp<span style="color: #990000">.</span>nz
<span style="color: #990000">===</span></tt></pre></div></div>
<div class="paragraph"><p>This creates a file <code>tmp.nz</code> with <code>854</code> vectors of weight <code>3</code>.</p></div>
<div class="paragraph"><p>Third, create the modified matrices <code>H</code>, <code>L</code>, and the vector of
probabilities <code>P</code> using the created list of codewords and the original
DEM model:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #990000">===</span>
<span style="color: #009900">$vecdec</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">3.32</span> <span style="color: #009900">finC</span><span style="color: #990000">=</span>tmp<span style="color: #990000">.</span>nz <span style="color: #009900">fout</span><span style="color: #990000">=</span>tmpX <span style="color: #009900">fdem</span><span style="color: #990000">=</span> <span style="color: #990000">.</span>/examples/surf_d3<span style="color: #990000">.</span>dem
<span style="color: #990000">===</span></tt></pre></div></div>
<div class="paragraph"><p>The modified matrices can be used with <code>det</code> and <code>obs</code> events
generated using <code>Stim</code> from the original <code>DEM</code> file by setting the
parameter <code>pads=1</code> which enables padding the syndrome vectors with
zeros.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #990000">===</span>
<span style="color: #009900">stim</span><span style="color: #990000">=..</span>/Stim/out/stim
<span style="color: #009900">fnam</span><span style="color: #990000">=</span>try
<span style="color: #009900">$stim</span> sample_dem --shots <span style="color: #993399">10240</span> --in <span style="color: #990000">.</span>/examples/surf_d3<span style="color: #990000">.</span>dem <span style="color: #990000">\</span>
        --out <span style="color: #009900">$fnam</span><span style="color: #990000">.</span>det --out_format <span style="color: #993399">01</span> <span style="color: #990000">\</span>
        --obs_out <span style="color: #009900">$fnam</span><span style="color: #990000">.</span>obs --obs_out_format <span style="color: #993399">01</span>
<span style="color: #009900">$vecdec</span> <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">1.14</span> <span style="color: #009900">fdem</span><span style="color: #990000">=.</span>/examples/surf_d3<span style="color: #990000">.</span>dem <span style="color: #990000">\</span>
           <span style="color: #009900">fdet</span><span style="color: #990000">=</span><span style="color: #009900">$fnam</span><span style="color: #990000">.</span>det <span style="color: #009900">fobs</span><span style="color: #990000">=</span><span style="color: #009900">$fnam</span><span style="color: #990000">.</span>obs <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">50</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #990000">\</span>
           <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">1024</span> <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">10240</span>
<span style="color: #009900">$vecdec</span> <span style="color: #009900">debug</span><span style="color: #990000">=</span><span style="color: #993399">1</span> <span style="color: #009900">mode</span><span style="color: #990000">=</span><span style="color: #993399">1.14</span> <span style="color: #009900">finH</span><span style="color: #990000">=</span>tmpXH<span style="color: #990000">.</span>mmx <span style="color: #009900">finL</span><span style="color: #990000">=</span>tmpXL<span style="color: #990000">.</span>mmx <span style="color: #009900">finP</span><span style="color: #990000">=</span>tmpXP<span style="color: #990000">.</span>mmx <span style="color: #990000">\</span>
           <span style="color: #009900">fdet</span><span style="color: #990000">=</span><span style="color: #009900">$fnam</span><span style="color: #990000">.</span>det <span style="color: #009900">fobs</span><span style="color: #990000">=</span><span style="color: #009900">$fnam</span><span style="color: #990000">.</span>obs <span style="color: #009900">steps</span><span style="color: #990000">=</span><span style="color: #993399">50</span> <span style="color: #009900">lerr</span><span style="color: #990000">=</span><span style="color: #993399">2</span> <span style="color: #990000">\</span>
           <span style="color: #009900">nvec</span><span style="color: #990000">=</span><span style="color: #993399">1024</span> <span style="color: #009900">ntot</span><span style="color: #990000">=</span><span style="color: #993399">10240</span> <span style="color: #009900">pads</span><span style="color: #990000">=</span><span style="color: #993399">1</span>
<span style="color: #990000">===</span></tt></pre></div></div>
<div class="paragraph"><p>Here the first <code>vecdec</code> run uses the original <code>DEM</code> file, while the
second run used the constructed matrices.</p></div>
<div class="paragraph"><p><strong>FIXME:</strong> apparently there is a bug somewhere as modified matrices
result in substantial degraded decoding (<code>BER</code> increases from
<code>0.00371</code> up to <code>0.0230</code>)</p></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2024-09-19 19:06:44 PDT
</div>
</div>
</body>
</html>
